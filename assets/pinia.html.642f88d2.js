/**
 * name: learning-vue3
 * description: A starting learning tutorial on Vue 3.0 + TypeScript, suitable for complete Vue novices and Vue 2.0 veterans, incorporating some of my own practical experience on the basis of official documents.
 * author: chengpeiquan
 * homepage: https://vue3.chengpeiquan.com/
 */
import{_ as u,r as c,o as k,c as d,b as s,a,w as p,F as m,d as n,e}from"./app.0c7b3152.js";const b={},g=s("h1",{id:"\u5168\u5C40\u72B6\u6001\u7684\u7BA1\u7406",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u5168\u5C40\u72B6\u6001\u7684\u7BA1\u7406","aria-hidden":"true"},"#"),n(" \u5168\u5C40\u72B6\u6001\u7684\u7BA1\u7406")],-1),h=n("\u672C\u6765\u8FD9\u90E8\u5206\u6253\u7B97\u653E\u5728 "),f=n("\u7EC4\u4EF6\u4E4B\u95F4\u7684\u901A\u4FE1"),_=n(" \u91CC\uFF0C\u91CC\u9762\u4E5F\u7B80\u5355\u4ECB\u7ECD\u4E86\u4E00\u4E0B Vuex \uFF0C\u4F46 Pinia \u4F5C\u4E3A\u88AB\u5B98\u65B9\u63A8\u8350\u5728 Vue 3 \u9879\u76EE\u91CC\u4F5C\u4E3A\u5168\u5C40\u72B6\u6001\u7BA1\u7406\u7684\u65B0\u5DE5\u5177\uFF0C\u5199\u7740\u5199\u7740\u6211\u89C9\u5F97\u8FD8\u662F\u5355\u72EC\u5F00\u4E00\u7AE0\u6765\u5199\u4F1A\u66F4\u65B9\u4FBF\u9605\u8BFB\u548C\u7406\u89E3\u3002"),y=n("\u5B98\u65B9\u63A8\u51FA\u7684\u5168\u5C40\u72B6\u6001\u7BA1\u7406\u5DE5\u5177\u76EE\u524D\u6709 "),v={href:"https://vuex.vuejs.org/zh/",target:"_blank",rel:"noopener noreferrer"},w=n("Vuex"),x=n(" \u548C "),S={href:"https://pinia.vuejs.org/",target:"_blank",rel:"noopener noreferrer"},E=n("Pinia"),A=n(" \uFF0C\u4E24\u8005\u7684\u4F5C\u7528\u548C\u7528\u6CD5\u90FD\u6BD4\u8F83\u76F8\u4F3C\uFF0C\u4F46 Pinia \u7684\u8BBE\u8BA1\u66F4\u8D34\u8FD1 Vue 3 \u7EC4\u5408\u5F0F API \u7684\u7528\u6CD5\u3002"),B=s("div",{class:"custom-container tip"},[s("p",{class:"custom-container-title"},"TIP"),s("p",null,"\u672C\u7AE0\u5185\u7684\u5927\u90E8\u5206\u5185\u5BB9\u90FD\u4F1A\u548C Vuex \u4F5C\u5BF9\u6BD4\uFF0C\u65B9\u4FBF\u4ECE Vuex \u9879\u76EE\u5411 Pinia \u7684\u8FC1\u79FB\u3002")],-1),P=s("h2",{id:"\u5173\u4E8E-pinia-new",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u5173\u4E8E-pinia-new","aria-hidden":"true"},"#"),n(" \u5173\u4E8E Pinia{new}")],-1),I=n("\u7531\u4E8E Vuex 4.x \u7248\u672C\u53EA\u662F\u4E2A\u8FC7\u6E21\u7248\uFF0CVuex 4 \u5BF9 TypeScript \u548C Composition API \u90FD\u4E0D\u662F\u5F88\u53CB\u597D\uFF0C\u867D\u7136\u5B98\u65B9\u56E2\u961F\u5728 GitHub \u5DF2\u6709\u8BA8\u8BBA "),M={href:"https://github.com/vuejs/rfcs/discussions/270",target:"_blank",rel:"noopener noreferrer"},q=n("Vuex 5"),T=n(" \u7684\u5F00\u53D1\u63D0\u6848\uFF0C\u4F46\u4ECE 2022-02-07 \u5728 Vue 3 \u88AB\u8BBE\u7F6E\u4E3A\u9ED8\u8BA4\u7248\u672C\u5F00\u59CB\uFF0C Pinia \u5DF2\u6B63\u5F0F\u88AB\u5B98\u65B9\u63A8\u8350\u4F5C\u4E3A\u5168\u5C40\u72B6\u6001\u7BA1\u7406\u7684\u5DE5\u5177\u3002"),V=s("p",null,"Pinia \u652F\u6301 Vue 3 \u548C Vue 2 \uFF0C\u5BF9 TypeScript \u4E5F\u6709\u5F88\u5B8C\u597D\u7684\u652F\u6301\uFF0C\u5EF6\u7EED\u672C\u6307\u5357\u7684\u5B97\u65E8\uFF0C\u6211\u4EEC\u5728\u8FD9\u91CC\u53EA\u4ECB\u7ECD\u57FA\u4E8E Vue 3 \u548C TypeScript \u7684\u7528\u6CD5\u3002",-1),C=n("\u70B9\u51FB\u8BBF\u95EE\uFF1A"),N={href:"https://pinia.vuejs.org/",target:"_blank",rel:"noopener noreferrer"},R=n("Pinia \u5B98\u7F51"),W=e(`<h2 id="\u5B89\u88C5\u548C\u542F\u7528-new" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5\u548C\u542F\u7528-new" aria-hidden="true">#</a> \u5B89\u88C5\u548C\u542F\u7528{new}</h2><p>Pinia \u76EE\u524D\u8FD8\u6CA1\u6709\u88AB\u5E7F\u6CDB\u7684\u9ED8\u8BA4\u96C6\u6210\u5728\u5404\u79CD\u811A\u624B\u67B6\u91CC\uFF0C\u6240\u4EE5\u5982\u679C\u4F60\u539F\u6765\u521B\u5EFA\u7684\u9879\u76EE\u6CA1\u6709 Pinia \uFF0C\u5219\u9700\u8981\u624B\u52A8\u5B89\u88C5\u5B83\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u9700\u8981 cd \u5230\u4F60\u7684\u9879\u76EE\u76EE\u5F55\u4E0B</span>
<span class="token function">npm</span> <span class="token function">install</span> pinia
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u67E5\u770B\u4F60\u7684 package.json \uFF0C\u770B\u770B\u91CC\u9762\u7684 <code>dependencies</code> \u662F\u5426\u6210\u529F\u52A0\u5165\u4E86 Pinia \u548C\u5B83\u7684\u7248\u672C\u53F7\uFF08\u4E0B\u65B9\u662F\u793A\u4F8B\u4EE3\u7801\uFF0C\u4EE5\u5B9E\u9645\u5B89\u88C5\u7684\u6700\u65B0\u7248\u672C\u53F7\u4E3A\u51C6\uFF09\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;pinia&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.11&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u7136\u540E\u6253\u5F00 <code>src/main.ts</code> \u6587\u4EF6\uFF0C\u6DFB\u52A0\u4E0B\u9762\u90A3\u4E24\u884C\u6709\u6CE8\u91CA\u7684\u65B0\u4EE3\u7801\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span> <span class="token comment">// \u5BFC\u5165 Pinia</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;@/App.vue&#39;</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// \u542F\u7528 Pinia</span>
  <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u5230\u8FD9\u91CC\uFF0C Pinia \u5C31\u96C6\u6210\u5230\u4F60\u7684\u9879\u76EE\u91CC\u4E86\u3002</p>`,8),F={class:"custom-container tip"},$=s("p",{class:"custom-container-title"},"TIP",-1),D=n("\u4E5F\u53EF\u4EE5\u901A\u8FC7 "),H=n("Create Preset"),j=n(" \u521B\u5EFA\u65B0\u9879\u76EE\uFF08\u9009\u62E9 "),z=s("code",null,"vue",-1),G=n(" \u6280\u672F\u6808\u8FDB\u5165\uFF0C\u9009\u62E9 "),J={href:"https://github.com/awesome-starter/vue3-ts-vite-starter",target:"_blank",rel:"noopener noreferrer"},U=n("vue3-ts-vite"),L=n(" \u6A21\u677F\uFF09\uFF0C\u53EF\u4EE5\u5F97\u5230\u4E00\u4E2A\u96C6\u6210\u5E38\u7528\u914D\u7F6E\u7684\u9879\u76EE\u542F\u52A8\u6A21\u677F\uFF0C\u8BE5\u6A21\u677F\u73B0\u5728\u4F7F\u7528 Pinia \u4F5C\u4E3A\u5168\u5C40\u72B6\u6001\u7BA1\u7406\u5DE5\u5177\u3002"),O=e(`<h2 id="\u72B6\u6001\u6811\u7684\u7ED3\u6784-new" tabindex="-1"><a class="header-anchor" href="#\u72B6\u6001\u6811\u7684\u7ED3\u6784-new" aria-hidden="true">#</a> \u72B6\u6001\u6811\u7684\u7ED3\u6784{new}</h2><p>\u5728\u5F00\u59CB\u5199\u4EE3\u7801\u4E4B\u524D\uFF0C\u6211\u4EEC\u5148\u6765\u770B\u4E00\u4E2A\u5BF9\u6BD4\uFF0C\u76F4\u89C2\u7684\u4E86\u89E3 Pinia \u7684\u72B6\u6001\u6811\u6784\u6210\uFF0C\u624D\u80FD\u5728\u540E\u9762\u7684\u73AF\u8282\u66F4\u597D\u7684\u7406\u89E3\u6BCF\u4E2A\u529F\u80FD\u7684\u7528\u9014\u3002</p><p>\u9274\u4E8E\u53EF\u80FD\u6709\u90E8\u5206\u540C\u5B66\u4E4B\u524D\u6CA1\u6709\u7528\u8FC7 Vuex \uFF0C\u6240\u4EE5\u6211\u52A0\u5165\u4E86 Vue \u7EC4\u4EF6\u4E00\u8D77\u5BF9\u6BD4\uFF08 Options API \u5199\u6CD5\uFF09\u3002</p><table><thead><tr><th style="text-align:center;">\u4F5C\u7528</th><th style="text-align:center;">Vue Component</th><th style="text-align:center;">Vuex</th><th style="text-align:center;">Pinia</th></tr></thead><tbody><tr><td style="text-align:center;">\u6570\u636E\u7BA1\u7406</td><td style="text-align:center;">data</td><td style="text-align:center;">state</td><td style="text-align:center;">state</td></tr><tr><td style="text-align:center;">\u6570\u636E\u8BA1\u7B97</td><td style="text-align:center;">computed</td><td style="text-align:center;">getters</td><td style="text-align:center;">getters</td></tr><tr><td style="text-align:center;">\u884C\u4E3A\u65B9\u6CD5</td><td style="text-align:center;">methods</td><td style="text-align:center;">mutations / actions</td><td style="text-align:center;">actions</td></tr></tbody></table><p>\u53EF\u4EE5\u770B\u5230 Pinia \u7684\u7ED3\u6784\u548C\u7528\u9014\u90FD\u548C Vuex \u4E0E Component \u975E\u5E38\u76F8\u4F3C\uFF0C\u5E76\u4E14 Pinia \u76F8\u5BF9\u4E8E Vuex \uFF0C\u5728\u884C\u4E3A\u65B9\u6CD5\u90E8\u5206\u53BB\u6389\u4E86 mutations \uFF08\u540C\u6B65\u64CD\u4F5C\uFF09\u548C actions \uFF08\u5F02\u6B65\u64CD\u4F5C\uFF09\u7684\u533A\u5206\uFF0C\u66F4\u63A5\u8FD1\u7EC4\u4EF6\u7684\u7ED3\u6784\uFF0C\u5165\u95E8\u6210\u672C\u4F1A\u66F4\u4F4E\u4E00\u4E9B\u3002</p><p>\u4E0B\u9762\u6211\u4EEC\u6765\u521B\u5EFA\u4E00\u4E2A\u7B80\u5355\u7684 Store \uFF0C\u5F00\u59CB\u7528 Pinia \u6765\u8FDB\u884C\u72B6\u6001\u7BA1\u7406\u3002</p><h2 id="\u521B\u5EFA-store-new" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA-store-new" aria-hidden="true">#</a> \u521B\u5EFA Store{new}</h2><p>\u548C Vuex \u4E00\u6837\uFF0C Pinia \u7684\u6838\u5FC3\u4E5F\u662F\u79F0\u4E4B\u4E3A Store \u3002</p><p>\u53C2\u7167 Pinia \u5B98\u7F51\u63A8\u8350\u7684\u9879\u76EE\u7BA1\u7406\u65B9\u6848\uFF0C\u6211\u4EEC\u4E5F\u662F\u5148\u5728 <code>src</code> \u6587\u4EF6\u5939\u4E0B\u521B\u5EFA\u4E00\u4E2A <code>stores</code> \u6587\u4EF6\u5939\uFF0C\u5E76\u5728\u91CC\u9762\u6DFB\u52A0\u4E00\u4E2A <code>index.ts</code> \u6587\u4EF6\uFF0C\u7136\u540E\u6211\u4EEC\u5C31\u53EF\u4EE5\u6765\u6DFB\u52A0\u4E00\u4E2A\u6700\u57FA\u7840\u7684 Store \u3002</p><p>Store \u662F\u901A\u8FC7 <code>defineStore</code> \u65B9\u6CD5\u6765\u521B\u5EFA\u7684\uFF0C\u5B83\u6709\u4E24\u79CD\u5165\u53C2\u5F62\u5F0F\uFF1A</p><h3 id="\u5F62\u5F0F-1-\u63A5\u6536\u4E24\u4E2A\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#\u5F62\u5F0F-1-\u63A5\u6536\u4E24\u4E2A\u53C2\u6570" aria-hidden="true">#</a> \u5F62\u5F0F 1 \uFF1A\u63A5\u6536\u4E24\u4E2A\u53C2\u6570</h3><p>\u63A5\u6536\u4E24\u4E2A\u53C2\u6570\uFF0C\u7B2C\u4E00\u4E2A\u53C2\u6570\u662F Store \u7684\u552F\u4E00 ID \uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F Store \u7684\u9009\u9879\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// src/stores/index.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&#39;main&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// Store \u9009\u9879...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="\u5F62\u5F0F-2-\u63A5\u6536\u4E00\u4E2A\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#\u5F62\u5F0F-2-\u63A5\u6536\u4E00\u4E2A\u53C2\u6570" aria-hidden="true">#</a> \u5F62\u5F0F 2 \uFF1A\u63A5\u6536\u4E00\u4E2A\u53C2\u6570</h3><p>\u63A5\u6536\u4E00\u4E2A\u53C2\u6570\uFF0C\u76F4\u63A5\u4F20\u5165 Store \u7684\u9009\u9879\uFF0C\u4F46\u662F\u9700\u8981\u628A\u552F\u4E00 ID \u4F5C\u4E3A\u9009\u9879\u7684\u4E00\u90E8\u5206\u4E00\u8D77\u4F20\u5165\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// src/stores/index.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">&#39;main&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// Store \u9009\u9879...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>\u4E0D\u8BBA\u662F\u54EA\u79CD\u521B\u5EFA\u5F62\u5F0F\uFF0C\u90FD\u5FC5\u987B\u4E3A Store \u6307\u5B9A\u4E00\u4E2A\u552F\u4E00 ID \u3002</p></div><p>\u53E6\u5916\u53EF\u4EE5\u770B\u5230\u6211\u628A\u5BFC\u51FA\u7684\u51FD\u6570\u540D\u547D\u540D\u4E3A <code>useStore</code> \uFF0C\u4EE5 <code>use</code> \u5F00\u5934\u662F Vue 3 \u5BF9\u53EF\u7EC4\u5408\u51FD\u6570\u7684\u4E00\u4E2A\u547D\u540D\u89C4\u8303\u3002</p>`,18),K=n("\u5E76\u4E14\u4F7F\u7528\u7684\u662F "),Q=s("code",null,"export const",-1),X=n(" \u800C\u4E0D\u662F "),Y=s("code",null,"export default",-1),Z=n(" \uFF08\u8BE6\u89C1\uFF1A"),nn={href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/export",target:"_blank",rel:"noopener noreferrer"},sn=n("\u547D\u540D\u5BFC\u51FA\u548C\u9ED8\u8BA4\u5BFC\u51FA"),an=n("\uFF09\uFF0C\u8FD9\u6837\u5728\u4F7F\u7528\u7684\u65F6\u5019\u53EF\u4EE5\u548C\u5176\u4ED6\u7684 Vue \u7EC4\u5408\u51FD\u6570\u4FDD\u6301\u4E00\u81F4\uFF0C\u90FD\u662F\u901A\u8FC7 "),en=s("code",null,"import { xxx } from 'xxx'",-1),tn=n(" \u6765\u5BFC\u5165\u3002"),pn=e(`<p>\u5982\u679C\u4F60\u6709\u591A\u4E2A Store \uFF0C\u53EF\u4EE5\u5206\u6A21\u5757\u7BA1\u7406\uFF0C\u5E76\u6839\u636E\u5B9E\u9645\u7684\u529F\u80FD\u7528\u9014\u8FDB\u884C\u547D\u540D\uFF08 e.g. <code>useMessageStore</code> \u3001 <code>useUserStore</code> \u3001 <code>useGameStore</code> \u2026 \uFF09\u3002</p><h2 id="\u7BA1\u7406-state-new" tabindex="-1"><a class="header-anchor" href="#\u7BA1\u7406-state-new" aria-hidden="true">#</a> \u7BA1\u7406 state{new}</h2><p>\u5728\u4E0A\u4E00\u5C0F\u8282\u7684 <a href="#%E7%8A%B6%E6%80%81%E6%A0%91%E7%9A%84%E7%BB%93%E6%9E%84-new">\u72B6\u6001\u6811\u7684\u7ED3\u6784</a> \u8FD9\u91CC\u6211\u4EEC\u5DF2\u7ECF\u4E86\u89E3\u8FC7\uFF0C Pinia \u662F\u5728 <code>state</code> \u91CC\u9762\u5B9A\u4E49\u72B6\u6001\u6570\u636E\u3002</p><h3 id="\u7ED9-store-\u6DFB\u52A0-state" tabindex="-1"><a class="header-anchor" href="#\u7ED9-store-\u6DFB\u52A0-state" aria-hidden="true">#</a> \u7ED9 Store \u6DFB\u52A0 state</h3><p>\u5B83\u662F\u901A\u8FC7\u4E00\u4E2A\u7BAD\u5934\u51FD\u6570\u7684\u5F62\u5F0F\u6765\u8FD4\u56DE\u6570\u636E\uFF0C\u5E76\u4E14\u80FD\u591F\u6B63\u786E\u7684\u5E2E\u4F60\u63A8\u5BFC TypeScript \u7C7B\u578B\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// src/stores/index.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&#39;main&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u6211\u4EEC\u5148\u5B9A\u4E49\u4E00\u4E2A\u6700\u57FA\u672C\u7684 message \u6570\u636E</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    message<span class="token operator">:</span> <span class="token string">&#39;Hello World&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div>`,6),on=n("\u9700\u8981\u6CE8\u610F\u4E00\u70B9\u7684\u662F\uFF0C\u5982\u679C\u4E0D\u663E\u5F0F return \uFF0C\u7BAD\u5934\u51FD\u6570\u7684\u8FD4\u56DE\u503C\u9700\u8981\u7528\u5706\u62EC\u53F7 "),cn=s("code",null,"()",-1),ln=n(" \u5957\u8D77\u6765\uFF0C\u8FD9\u4E2A\u662F\u7BAD\u5934\u51FD\u6570\u7684\u8981\u6C42\uFF08\u8BE6\u89C1\uFF1A"),rn={href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions#%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1%E5%AD%97%E9%9D%A2%E9%87%8F",target:"_blank",rel:"noopener noreferrer"},un=n("\u8FD4\u56DE\u5BF9\u8C61\u5B57\u9762\u91CF"),kn=n("\uFF09\u3002"),dn=e(`<p>\u6240\u4EE5\u76F8\u5F53\u4E8E\u8FD9\u6837\u5199\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// ...</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&#39;main&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      message<span class="token operator">:</span> <span class="token string">&#39;Hello World&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u6211\u4E2A\u4EBA\u8FD8\u662F\u66F4\u559C\u6B22\u52A0\u5706\u62EC\u53F7\u7684\u7B80\u5199\u65B9\u5F0F\u3002</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>\u53EF\u80FD\u6709\u540C\u5B66\u4F1A\u95EE\uFF1A Vuex \u53EF\u4EE5\u7528\u4E00\u4E2A\u5BF9\u8C61\u6765\u5B9A\u4E49 state \u7684\u6570\u636E\uFF0C Pinia \u53EF\u4EE5\u5417\uFF1F</p><p>\u7B54\u6848\u662F\uFF1A\u4E0D\u53EF\u4EE5\uFF01 state \u7684\u7C7B\u578B\u5FC5\u987B\u662F <code>state?: (() =&gt; {}) | undefined</code> \uFF0C\u8981\u4E48\u4E0D\u914D\u7F6E\uFF08\u5C31\u662F undefined \uFF09\uFF0C\u8981\u4E48\u53EA\u80FD\u662F\u4E2A\u7BAD\u5934\u51FD\u6570\u3002</p></div><h3 id="\u624B\u52A8\u6307\u5B9A\u6570\u636E\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#\u624B\u52A8\u6307\u5B9A\u6570\u636E\u7C7B\u578B" aria-hidden="true">#</a> \u624B\u52A8\u6307\u5B9A\u6570\u636E\u7C7B\u578B</h3><p>\u867D\u7136 Pinia \u4F1A\u5E2E\u4F60\u63A8\u5BFC TypeScript \u7684\u6570\u636E\u7C7B\u578B\uFF0C\u4F46\u6709\u65F6\u5019\u53EF\u80FD\u4E0D\u592A\u591F\u7528\uFF0C\u6BD4\u5982\u4E0B\u9762\u8FD9\u6BB5\u4EE3\u7801\uFF0C\u8BF7\u7559\u610F\u4EE3\u7801\u6CE8\u91CA\u7684\u8BF4\u660E\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// ...</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&#39;main&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      message<span class="token operator">:</span> <span class="token string">&#39;Hello World&#39;</span><span class="token punctuation">,</span>
      <span class="token comment">// \u6DFB\u52A0\u4E86\u4E00\u4E2A\u968F\u673A\u6D88\u606F\u6570\u7EC4</span>
      randomMessages<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>\u4F60\u7684\u9884\u671F\u5E94\u8BE5\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32\u6570\u7EC4 <code>string[]</code> \uFF0C\u4F46\u662F\u8FD9\u4E2A\u65F6\u5019 Pinia \u4F1A\u5E2E\u4F60\u63A8\u5BFC\u6210 <code>never[]</code> \uFF0C\u90A3\u4E48\u7C7B\u578B\u5C31\u5BF9\u4E0D\u4E0A\u4E86\u3002</p><p>\u8FD9\u79CD\u60C5\u51B5\u4E0B\u4F60\u5C31\u9700\u8981\u624B\u52A8\u6307\u5B9A randomMessages \u7684\u7C7B\u578B\uFF0C\u53EF\u4EE5\u901A\u8FC7 <code>as</code> \u6765\u6307\u5B9A\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// ...</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&#39;main&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      message<span class="token operator">:</span> <span class="token string">&#39;Hello World&#39;</span><span class="token punctuation">,</span>
      <span class="token comment">// \u901A\u8FC7 as \u5173\u952E\u5B57\u6307\u5B9A TS \u7C7B\u578B</span>
      randomMessages<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>\u6216\u8005\u4F7F\u7528\u5C16\u62EC\u53F7 <code>&lt;&gt;</code> \u6765\u6307\u5B9A\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// ...</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&#39;main&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      message<span class="token operator">:</span> <span class="token string">&#39;Hello World&#39;</span><span class="token punctuation">,</span>
      <span class="token comment">// \u901A\u8FC7\u5C16\u62EC\u53F7\u6307\u5B9A TS \u7C7B\u578B</span>
      randomMessages<span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>\u8FD9\u4E24\u79CD\u65B9\u5F0F\u662F\u7B49\u4EF7\u7684\u3002</p><h3 id="\u83B7\u53D6\u548C\u66F4\u65B0-state" tabindex="-1"><a class="header-anchor" href="#\u83B7\u53D6\u548C\u66F4\u65B0-state" aria-hidden="true">#</a> \u83B7\u53D6\u548C\u66F4\u65B0 state</h3><p>\u83B7\u53D6 state \u6709\u591A\u79CD\u65B9\u6CD5\uFF0C\u7565\u5FAE\u6709\u533A\u522B\uFF08\u8BE6\u89C1\u4E0B\u65B9\u5404\u81EA\u7684\u8BF4\u660E\uFF09\uFF0C\u4F46\u76F8\u540C\u7684\u662F\uFF0C\u4ED6\u4EEC\u90FD\u662F\u54CD\u5E94\u6027\u7684\u3002</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>\u4E0D\u80FD\u76F4\u63A5\u901A\u8FC7 ES6 \u89E3\u6784\u7684\u65B9\u5F0F\uFF08 e.g. <code>const { message } = store</code> \uFF09\uFF0C\u90A3\u6837\u4F1A\u7834\u574F\u6570\u636E\u7684\u54CD\u5E94\u6027\u3002</p></div><h4 id="\u4F7F\u7528-store-\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-store-\u5B9E\u4F8B" aria-hidden="true">#</a> \u4F7F\u7528 store \u5B9E\u4F8B</h4><p>\u7528\u6CD5\u4E0A\u548C Vuex \u5F88\u76F8\u4F3C\uFF0C\u4F46\u6709\u4E00\u70B9\u533A\u522B\u662F\uFF0C\u6570\u636E\u76F4\u63A5\u662F\u6302\u5728 <code>store</code> \u4E0A\u7684\uFF0C\u800C\u4E0D\u662F <code>store.state</code> \u4E0A\u9762\uFF01</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>e.g. Vuex \u662F <code>store.state.message</code> \uFF0C Pinia \u662F <code>store.message</code> \u3002</p></div><p>\u6240\u4EE5\uFF0C\u4F60\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7 <code>store.message</code> \u76F4\u63A5\u8C03\u7528 state \u91CC\u7684\u6570\u636E\u3002</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/stores&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u50CF useRouter \u90A3\u6837\u5B9A\u4E49\u4E00\u4E2A\u53D8\u91CF\u62FF\u5230\u5B9E\u4F8B</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// \u76F4\u63A5\u901A\u8FC7\u5B9E\u4F8B\u6765\u83B7\u53D6\u6570\u636E</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>message<span class="token punctuation">)</span>

    <span class="token comment">// \u8FD9\u79CD\u65B9\u5F0F\u4F60\u9700\u8981\u628A\u6574\u4E2A store \u7ED9\u5230 template \u53BB\u6E32\u67D3\u6570\u636E</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      store<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>\u4F46\u4E00\u4E9B\u6BD4\u8F83\u590D\u6742\u7684\u6570\u636E\u8FD9\u6837\u5199\u4F1A\u5F88\u957F\uFF0C\u6240\u4EE5\u6709\u65F6\u5019\u66F4\u63A8\u8350\u7528\u4E0B\u9762\u4ECB\u7ECD\u7684 <a href="#%E4%BD%BF%E7%94%A8-computed-api">computed API</a> \u548C <a href="#%E4%BD%BF%E7%94%A8-storetorefs-api">storeToRefs API</a> \u7B49\u65B9\u5F0F\u6765\u83B7\u53D6\u3002</p>`,22),mn=n("\u5728\u6570\u636E\u66F4\u65B0\u65B9\u9762\uFF0C\u5728 Pinia \u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7 Store \u5B9E\u4F8B\u66F4\u65B0 state \uFF08\u8FD9\u4E00\u70B9\u4E0E Vuex \u6709\u660E\u663E\u7684\u4E0D\u540C\uFF0C"),bn={href:"https://vuex.vuejs.org/zh/guide/mutations.html",target:"_blank",rel:"noopener noreferrer"},gn=n("\u66F4\u6539 Vuex \u7684 store \u4E2D\u7684\u72B6\u6001\u7684\u552F\u4E00\u65B9\u6CD5\u662F\u63D0\u4EA4 mutation"),hn=n("\uFF09\uFF0C\u6240\u4EE5\u5982\u679C\u4F60\u8981\u66F4\u65B0 "),fn=s("code",null,"message",-1),_n=n(" \uFF0C\u53EA\u9700\u8981\u50CF\u4E0B\u9762\u8FD9\u6837\uFF0C\u5C31\u53EF\u4EE5\u66F4\u65B0 "),yn=s("code",null,"message",-1),vn=n(" \u7684\u503C\u4E86\uFF01"),wn=e(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>store<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&#39;New Message.&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="\u4F7F\u7528-computed-api" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-computed-api" aria-hidden="true">#</a> \u4F7F\u7528 computed API</h4><p>\u73B0\u5728 state \u91CC\u5DF2\u7ECF\u6709\u6211\u4EEC\u5B9A\u4E49\u597D\u7684\u6570\u636E\u4E86\uFF0C\u4E0B\u9762\u8FD9\u6BB5\u4EE3\u7801\u662F\u5728 Vue \u7EC4\u4EF6\u91CC\u5BFC\u5165\u6211\u4EEC\u7684 Store \uFF0C\u5E76\u901A\u8FC7\u8BA1\u7B97\u6570\u636E <code>computed</code> \u62FF\u5230\u91CC\u9762\u7684 <code>message</code> \u6570\u636E\u4F20\u7ED9 template \u4F7F\u7528\u3002</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/stores&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u50CF useRouter \u90A3\u6837\u5B9A\u4E49\u4E00\u4E2A\u53D8\u91CF\u62FF\u5230\u5B9E\u4F8B</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// \u901A\u8FC7\u8BA1\u7B97\u62FF\u5230\u91CC\u9762\u7684\u6570\u636E</span>
    <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> message<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

    <span class="token comment">// \u4F20\u7ED9 template \u4F7F\u7528</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>\u548C <a href="#%E4%BD%BF%E7%94%A8-store-%E5%AE%9E%E4%BE%8B">\u4F7F\u7528 store \u5B9E\u4F8B</a> \u4EE5\u53CA <a href="#%E4%BD%BF%E7%94%A8-storetorefs-api">\u4F7F\u7528 storeToRefs API</a> \u4E0D\u540C\uFF0C\u8FD9\u4E2A\u65B9\u5F0F\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u65E0\u6CD5\u76F4\u63A5\u66F4\u65B0 state \u7684\u503C\u3002</p>`,5),xn={class:"custom-container tip"},Sn=s("p",{class:"custom-container-title"},"TIP",-1),En=n("\u8FD9\u91CC\u7684\u5B9A\u4E49\u7684 "),An=s("code",null,"message",-1),Bn=n(" \u53D8\u91CF\u662F\u4E00\u4E2A\u53EA\u6709 getter \uFF0C\u6CA1\u6709 setter \u7684 "),Pn=n("ComputedRef"),In=n(" \u6570\u636E\uFF0C\u6240\u4EE5\u5B83\u662F\u53EA\u8BFB\u7684\u3002"),Mn=s("p",null,"\u5982\u679C\u4F60\u8981\u66F4\u65B0\u6570\u636E\u600E\u4E48\u529E\uFF1F",-1),qn=s("li",null,[s("p",null,"\u53EF\u4EE5\u901A\u8FC7\u63D0\u524D\u5B9A\u4E49\u597D\u7684 Store Actions \u65B9\u6CD5\u8FDB\u884C\u66F4\u65B0\u3002")],-1),Tn=n("\u5728\u5B9A\u4E49 computed \u53D8\u91CF\u7684\u65F6\u5019\uFF0C\u914D\u7F6E\u597D "),Vn=n("setter"),Cn=n(" \u7684\u884C\u4E3A\uFF1A"),Nn=e(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u5176\u4ED6\u4EE3\u7801\u548C\u4E0A\u4E00\u4E2A\u4F8B\u5B50\u4E00\u6837\uFF0C\u8FD9\u91CC\u7701\u7565...</span>

<span class="token comment">// \u4FEE\u6539\uFF1A\u5B9A\u4E49 computed \u53D8\u91CF\u7684\u65F6\u5019\u914D\u7F6E getter \u548C setter</span>
<span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// getter \u8FD8\u662F\u8FD4\u56DE\u6570\u636E\u7684\u503C</span>
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">.</span>message<span class="token punctuation">,</span>
  <span class="token comment">// \u914D\u7F6E setter \u6765\u5B9A\u4E49\u8D4B\u503C\u540E\u7684\u884C\u4E3A</span>
  <span class="token function">set</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    store<span class="token punctuation">.</span>message <span class="token operator">=</span> newVal
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// \u6B64\u65F6\u4E0D\u518D\u629B\u51FA Write operation failed: computed value is readonly \u7684\u8B66\u544A</span>
message<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&#39;New Message.&#39;</span>

<span class="token comment">// store \u4E0A\u7684\u6570\u636E\u5DF2\u6210\u529F\u53D8\u6210\u4E86 New Message.</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="\u4F7F\u7528-storetorefs-api" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-storetorefs-api" aria-hidden="true">#</a> \u4F7F\u7528 storeToRefs API</h4><p>Pinia \u8FD8\u63D0\u4F9B\u4E86\u4E00\u4E2A <code>storeToRefs</code> API \u7528\u4E8E\u628A state \u7684\u6570\u636E\u8F6C\u6362\u4E3A <code>ref</code> \u53D8\u91CF\u3002</p>`,3),Rn=n("\u8FD9\u662F\u4E00\u4E2A\u4E13\u95E8\u4E3A Pinia Stores \u8BBE\u8BA1\u7684 API \uFF0C\u7C7B\u4F3C\u4E8E "),Wn=n("toRefs"),Fn=n(" \uFF0C\u533A\u522B\u5728\u4E8E\uFF0C\u5B83\u4F1A\u5FFD\u7565\u6389 Store \u4E0A\u9762\u7684\u65B9\u6CD5\u548C\u975E\u54CD\u5E94\u6027\u7684\u6570\u636E\uFF0C\u53EA\u8FD4\u56DE state \u4E0A\u7684\u54CD\u5E94\u6027\u6570\u636E\u3002"),$n=e(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/stores&#39;</span>

<span class="token comment">// \u8BB0\u5F97\u5BFC\u5165\u8FD9\u4E2A API</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> storeToRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// \u901A\u8FC7 storeToRefs \u6765\u62FF\u5230\u54CD\u5E94\u6027\u7684 message</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">storeToRefs</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> message<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div>`,1),Dn=n("\u901A\u8FC7\u8FD9\u4E2A\u65B9\u5F0F\u62FF\u5230\u7684 "),Hn=s("code",null,"message",-1),jn=n(" \u53D8\u91CF\u662F\u4E00\u4E2A "),zn=n("Ref"),Gn=n(" \u7C7B\u578B\u7684\u6570\u636E\uFF0C\u6240\u4EE5\u4F60\u53EF\u4EE5\u50CF\u666E\u901A\u7684 ref \u53D8\u91CF\u4E00\u6837\u8FDB\u884C\u8BFB\u53D6\u548C\u8D4B\u503C\u3002"),Jn=e(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u76F4\u63A5\u8D4B\u503C\u5373\u53EF</span>
message<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&#39;New Message.&#39;</span>

<span class="token comment">// store \u4E0A\u7684\u6570\u636E\u5DF2\u6210\u529F\u53D8\u6210\u4E86 New Message.</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="\u4F7F\u7528-torefs-api" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-torefs-api" aria-hidden="true">#</a> \u4F7F\u7528 toRefs API</h4>`,2),Un=n("\u5982 "),Ln=s("a",{href:"#%E4%BD%BF%E7%94%A8-storetorefs-api"},"\u4F7F\u7528 storeToRefs API",-1),On=n(" \u90E8\u5206\u6240\u8BF4\uFF0C\u8BE5 API \u672C\u8EAB\u7684\u8BBE\u8BA1\u5C31\u662F\u7C7B\u4F3C\u4E8E "),Kn=n("toRefs"),Qn=n(" \uFF0C\u6240\u4EE5\u4F60\u4E5F\u53EF\u4EE5\u76F4\u63A5\u7528 toRefs \u628A state \u4E0A\u7684\u6570\u636E\u8F6C\u6210 ref \u53D8\u91CF\u3002"),Xn=e(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u6CE8\u610F toRefs \u662F vue \u7684 API \uFF0C\u4E0D\u662F Pinia</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/stores&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// \u8DDF storeToRefs \u64CD\u4F5C\u90FD\u4E00\u6837\uFF0C\u53EA\u4E0D\u8FC7\u7528 Vue \u7684\u8FD9\u4E2A API \u6765\u5904\u7406</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> message<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div>`,1),Yn=n("\u8BE6\u89C1 "),Zn=n("\u4F7F\u7528 toRefs"),ns=n(" \u4E00\u8282\u7684\u8BF4\u660E\uFF0C\u53EF\u4EE5\u50CF\u666E\u901A\u7684 ref \u53D8\u91CF\u4E00\u6837\u8FDB\u884C\u8BFB\u53D6\u548C\u8D4B\u503C\u3002"),ss=e(`<p>\u53E6\u5916\uFF0C\u50CF\u4E0A\u9762\u8FD9\u6837\uFF0C\u5BF9 store \u6267\u884C toRefs \u4F1A\u628A store \u4E0A\u9762\u7684 getters \u3001 actions \u4E5F\u4E00\u8D77\u63D0\u53D6\uFF0C\u5982\u679C\u4F60\u53EA\u9700\u8981\u63D0\u53D6 state \u4E0A\u7684\u6570\u636E\uFF0C\u53EF\u4EE5\u8FD9\u6837\u505A\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u53EA\u4F20\u5165 store.$state</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>$state<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="\u4F7F\u7528-toref-api" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-toref-api" aria-hidden="true">#</a> \u4F7F\u7528 toRef API</h4><p>toRef \u662F toRefs \u7684\u5144\u5F1F API \uFF0C\u4E00\u4E2A\u662F\u53EA\u8F6C\u6362\u4E00\u4E2A\u5B57\u6BB5\uFF0C\u4E00\u4E2A\u662F\u8F6C\u6362\u6240\u6709\u5B57\u6BB5\uFF0C\u6240\u4EE5\u5B83\u4E5F\u53EF\u4EE5\u7528\u6765\u8F6C\u6362 state \u6570\u636E\u53D8\u6210 ref \u53D8\u91CF\u3002</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u6CE8\u610F toRef \u662F vue \u7684 API \uFF0C\u4E0D\u662F Pinia</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> toRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/stores&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// \u9075\u5FAA toRef \u7684\u7528\u6CD5\u5373\u53EF</span>
    <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>store<span class="token punctuation">,</span> <span class="token string">&#39;message&#39;</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> message<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div>`,5),as=n("\u8BE6\u89C1 "),es=n("\u4F7F\u7528 toRef"),ts=n(" \u4E00\u8282\u7684\u8BF4\u660E\uFF0C\u53EF\u4EE5\u50CF\u666E\u901A\u7684 ref \u53D8\u91CF\u4E00\u6837\u8FDB\u884C\u8BFB\u53D6\u548C\u8D4B\u503C\u3002"),ps=e(`<h4 id="\u4F7F\u7528-actions-\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-actions-\u65B9\u6CD5" aria-hidden="true">#</a> \u4F7F\u7528 actions \u65B9\u6CD5</h4><p>\u5728 Vuex \uFF0C\u5982\u679C\u60F3\u901A\u8FC7\u65B9\u6CD5\u6765\u64CD\u4F5C state \u7684\u66F4\u65B0\uFF0C\u5FC5\u987B\u901A\u8FC7 mutation \u6765\u63D0\u4EA4\uFF1B\u800C\u5F02\u6B65\u64CD\u4F5C\u9700\u8981\u66F4\u591A\u4E00\u4E2A\u6B65\u9AA4\uFF0C\u5FC5\u987B\u5148\u901A\u8FC7 action \u6765\u89E6\u53D1 mutation \uFF0C\u975E\u5E38\u7E41\u7410\uFF01</p><p>Pinia \u6240\u6709\u64CD\u4F5C\u90FD\u96C6\u5408\u4E3A action \uFF0C\u65E0\u9700\u533A\u5206\u540C\u6B65\u548C\u5F02\u6B65\uFF0C\u6309\u7167\u5E73\u65F6\u7684\u51FD\u6570\u5B9A\u4E49\u5373\u53EF\u66F4\u65B0 state \uFF0C\u5177\u4F53\u64CD\u4F5C\u8BE6\u89C1 <a href="#%E7%AE%A1%E7%90%86-actions-new">\u7BA1\u7406 actions</a> \u4E00\u8282\u3002</p><h3 id="\u6279\u91CF\u66F4\u65B0-state" tabindex="-1"><a class="header-anchor" href="#\u6279\u91CF\u66F4\u65B0-state" aria-hidden="true">#</a> \u6279\u91CF\u66F4\u65B0 state</h3><p>\u5728 <a href="#%E8%8E%B7%E5%8F%96%E5%92%8C%E6%9B%B4%E6%96%B0-state">\u83B7\u53D6\u548C\u66F4\u65B0 state</a> \u90E8\u5206\u8BF4\u7684\u90FD\u662F\u5982\u4F55\u4FEE\u6539\u5355\u4E2A state \u6570\u636E\uFF0C\u90A3\u4E48\u6709\u65F6\u5019\u8981\u540C\u65F6\u4FEE\u6539\u5F88\u591A\u4E2A\uFF0C\u4F1A\u663E\u5F97\u6BD4\u8F83\u7E41\u7410\u3002</p><p>\u5982\u679C\u4F60\u5199\u8FC7 React \u6216\u8005\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\uFF0C\u5E94\u8BE5\u975E\u5E38\u719F\u6089\u8FD9\u4E9B\u7528\u6CD5\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u4E0B\u9762\u4E0D\u662F Vue \u7684\u4EE3\u7801\uFF0C\u4E0D\u8981\u5728\u4F60\u7684\u9879\u76EE\u91CC\u4F7F\u7528</span>

<span class="token comment">// React</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token string">&#39;New Foo Value&#39;</span><span class="token punctuation">,</span>
  bar<span class="token operator">:</span> <span class="token string">&#39;New bar Value&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// \u5FAE\u4FE1\u5C0F\u7A0B\u5E8F</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token string">&#39;New Foo Value&#39;</span><span class="token punctuation">,</span>
  bar<span class="token operator">:</span> <span class="token string">&#39;New bar Value&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Pinia \u4E5F\u63D0\u4F9B\u4E86\u4E00\u4E2A <code>$patch</code> API \u7528\u4E8E\u540C\u65F6\u4FEE\u6539\u591A\u4E2A\u6570\u636E\uFF0C\u5B83\u63A5\u6536\u4E00\u4E2A\u53C2\u6570\uFF1A</p><table><thead><tr><th style="text-align:center;">\u53C2\u6570</th><th style="text-align:center;">\u7C7B\u578B</th><th style="text-align:center;">\u8BED\u6CD5</th></tr></thead><tbody><tr><td style="text-align:center;">partialState</td><td style="text-align:center;">\u5BF9\u8C61 / \u51FD\u6570</td><td style="text-align:center;">store.$patch(partialState)</td></tr></tbody></table><h4 id="\u4F20\u5165\u4E00\u4E2A\u5BF9\u8C61" tabindex="-1"><a class="header-anchor" href="#\u4F20\u5165\u4E00\u4E2A\u5BF9\u8C61" aria-hidden="true">#</a> \u4F20\u5165\u4E00\u4E2A\u5BF9\u8C61</h4><p>\u5F53\u53C2\u6570\u7C7B\u578B\u4E3A\u5BF9\u8C61\u65F6\uFF0C<code>key</code> \u662F\u8981\u4FEE\u6539\u7684 state \u6570\u636E\u540D\u79F0\uFF0C <code>value</code> \u662F\u65B0\u7684\u503C\uFF08\u652F\u6301\u5D4C\u5957\u4F20\u503C\uFF09\uFF0C\u7528\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u7EE7\u7EED\u7528\u6211\u4EEC\u524D\u9762\u7684\u6570\u636E\uFF0C\u8FD9\u91CC\u4F1A\u6253\u5370\u51FA\u4FEE\u6539\u524D\u7684\u503C</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>$state<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// \u8F93\u51FA {&quot;message&quot;:&quot;Hello World&quot;,&quot;randomMessages&quot;:[]}</span>

<span class="token doc-comment comment">/**
 * \u6CE8\u610F\u8FD9\u91CC\uFF0C\u4F20\u5165\u4E86\u4E00\u4E2A\u5BF9\u8C61
 */</span>
store<span class="token punctuation">.</span><span class="token function">$patch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  message<span class="token operator">:</span> <span class="token string">&#39;New Message&#39;</span><span class="token punctuation">,</span>
  randomMessages<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;msg1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;msg2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;msg3&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// \u8FD9\u91CC\u4F1A\u6253\u5370\u51FA\u4FEE\u6539\u540E\u7684\u503C</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>$state<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// \u8F93\u51FA {&quot;message&quot;:&quot;New Message&quot;,&quot;randomMessages&quot;:[&quot;msg1&quot;,&quot;msg2&quot;,&quot;msg3&quot;]}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>\u5BF9\u4E8E\u7B80\u5355\u7684\u6570\u636E\uFF0C\u76F4\u63A5\u4FEE\u6539\u6210\u65B0\u503C\u662F\u975E\u5E38\u597D\u7528\u7684\u3002</p><p>\u4F46\u6709\u65F6\u5019\u5E76\u4E0D\u5355\u5355\u53EA\u662F\u4FEE\u6539\uFF0C\u800C\u662F\u8981\u5BF9\u6570\u636E\u8FDB\u884C\u62FC\u63A5\u3001\u8865\u5145\u3001\u5408\u5E76\u7B49\u64CD\u4F5C\uFF0C\u76F8\u5BF9\u800C\u8A00\u5F00\u9500\u5C31\u4F1A\u5F88\u5927\uFF0C\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u66F4\u9002\u5408 <a href="#%E4%BC%A0%E5%85%A5%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0">\u4F20\u5165\u4E00\u4E2A\u51FD\u6570</a> \u6765\u5904\u7406\u3002</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>\u4F7F\u7528\u8FD9\u4E2A\u65B9\u5F0F\u65F6\uFF0C <code>key</code> \u53EA\u5141\u8BB8\u662F\u5B9E\u4F8B\u4E0A\u5DF2\u6709\u7684\u6570\u636E\uFF0C\u4E0D\u53EF\u4EE5\u63D0\u4EA4\u672A\u5B9A\u4E49\u7684\u6570\u636E\u8FDB\u53BB\u3002</p><p>\u5F3A\u5236\u63D0\u4EA4\u7684\u8BDD\uFF0C\u5728 TypeScript \u4F1A\u629B\u51FA\u9519\u8BEF\uFF0C JavaScript \u867D\u7136\u4E0D\u4F1A\u62A5\u9519\uFF0C\u4F46\u5B9E\u9645\u4E0A\uFF0C Store \u5B9E\u4F8B\u4E0A\u9762\u4F9D\u7136\u4E0D\u4F1A\u6709\u8FD9\u4E2A\u65B0\u589E\u7684\u975E\u6CD5\u6570\u636E\u3002</p></div><h4 id="\u4F20\u5165\u4E00\u4E2A\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u4F20\u5165\u4E00\u4E2A\u51FD\u6570" aria-hidden="true">#</a> \u4F20\u5165\u4E00\u4E2A\u51FD\u6570</h4><p>\u5F53\u53C2\u6570\u7C7B\u578B\u4E3A\u51FD\u6570\u65F6\uFF0C\u8BE5\u51FD\u6570\u4F1A\u6709\u4E00\u4E2A\u5165\u53C2 <code>state</code> \uFF0C\u662F\u5F53\u524D\u5B9E\u4F8B\u7684 state \uFF0C\u7B49\u4EF7\u4E8E store.$state \uFF0C\u7528\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u8FD9\u91CC\u4F1A\u6253\u5370\u51FA\u4FEE\u6539\u524D\u7684\u503C</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>$state<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// \u8F93\u51FA {&quot;message&quot;:&quot;Hello World&quot;,&quot;randomMessages&quot;:[]}</span>

<span class="token doc-comment comment">/**
 * \u6CE8\u610F\u8FD9\u91CC\uFF0C\u8FD9\u6B21\u662F\u4F20\u5165\u4E86\u4E00\u4E2A\u51FD\u6570
 */</span>
store<span class="token punctuation">.</span><span class="token function">$patch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  state<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&#39;New Message&#39;</span>

  <span class="token comment">// \u6570\u7EC4\u6539\u6210\u7528\u8FFD\u52A0\u7684\u65B9\u5F0F\uFF0C\u800C\u4E0D\u662F\u91CD\u65B0\u8D4B\u503C</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>randomMessages<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">msg</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// \u8FD9\u91CC\u4F1A\u6253\u5370\u51FA\u4FEE\u6539\u540E\u7684\u503C</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>$state<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// \u8F93\u51FA {&quot;message&quot;:&quot;New Message&quot;,&quot;randomMessages&quot;:[&quot;msg1&quot;,&quot;msg2&quot;,&quot;msg3&quot;]}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>\u548C <a href="#%E4%BC%A0%E5%85%A5%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1">\u4F20\u5165\u4E00\u4E2A\u5BF9\u8C61</a> \u6BD4\uFF0C\u4E0D\u4E00\u5B9A\u8BF4\u5C31\u662F\u54EA\u79CD\u65B9\u5F0F\u66F4\u597D\uFF0C\u901A\u5E38\u8981\u7ED3\u5408\u4E1A\u52A1\u573A\u666F\u5408\u7406\u4F7F\u7528\u3002</p>`,19),os={class:"custom-container tip"},cs=s("p",{class:"custom-container-title"},"TIP",-1),ls=s("p",null,[n("\u4F7F\u7528\u8FD9\u4E2A\u65B9\u5F0F\u65F6\uFF0C\u548C "),s("a",{href:"#%E4%BC%A0%E5%85%A5%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1"},"\u4F20\u5165\u4E00\u4E2A\u5BF9\u8C61"),n(" \u4E00\u6837\u53EA\u80FD\u4FEE\u6539\u5DF2\u5B9A\u4E49\u7684\u6570\u636E\uFF0C\u5E76\u4E14\u53E6\u5916\u9700\u8981\u6CE8\u610F\uFF0C\u4F20\u8FDB\u53BB\u7684\u51FD\u6570\u53EA\u80FD\u662F\u540C\u6B65\u51FD\u6570\uFF0C\u4E0D\u53EF\u4EE5\u662F\u5F02\u6B65\u51FD\u6570\uFF01")],-1),rs=n("\u5982\u679C\u8FD8\u4E0D\u6E05\u695A\u4EC0\u4E48\u662F\u540C\u6B65\u548C\u5F02\u6B65\uFF0C\u53EF\u4EE5\u9605\u8BFB "),is={href:"https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Asynchronous/Introducing",target:"_blank",rel:"noopener noreferrer"},us=n("\u540C\u6B65\u548C\u5F02\u6B65 JavaScript - MDN"),ks=n(" \u4E00\u6587\u3002"),ds=e(`<h3 id="\u5168\u91CF\u66F4\u65B0-state" tabindex="-1"><a class="header-anchor" href="#\u5168\u91CF\u66F4\u65B0-state" aria-hidden="true">#</a> \u5168\u91CF\u66F4\u65B0 state</h3><p>\u5728 <a href="#%E6%89%B9%E9%87%8F%E6%9B%B4%E6%96%B0-state">\u6279\u91CF\u66F4\u65B0 state</a> \u6211\u4EEC\u4E86\u89E3\u5230\u53EF\u4EE5\u7528 <code>store.$patch</code> \u65B9\u6CD5\u5BF9\u6570\u636E\u8FDB\u884C\u6279\u91CF\u66F4\u65B0\u64CD\u4F5C\uFF0C\u4E0D\u8FC7\u5982\u5176\u547D\u540D\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u672C\u8D28\u4E0A\u662F\u4E00\u79CD \u201C\u8865\u4E01\u66F4\u65B0\u201D \u3002</p><p>\u867D\u7136\u4F60\u53EF\u4EE5\u5BF9\u6240\u6709\u6570\u636E\u90FD\u6267\u884C\u4E00\u6B21 \u201C\u8865\u4E01\u66F4\u65B0\u201D \u6765\u8FBE\u5230 \u201C\u5168\u91CF\u66F4\u65B0\u201D \u7684\u76EE\u7684\uFF0C\u4F46 Pinia \u4E5F\u63D0\u4F9B\u4E86\u4E00\u4E2A\u66F4\u597D\u7684\u529E\u6CD5\u3002</p><p>\u4ECE\u524D\u9762\u591A\u6B21\u63D0\u5230 state \u6570\u636E\u53EF\u4EE5\u901A\u8FC7 <code>store.$state</code> \u6765\u62FF\u5230\uFF0C\u800C\u8FD9\u4E2A\u5C5E\u6027\u672C\u8EAB\u662F\u53EF\u4EE5\u76F4\u63A5\u8D4B\u503C\u7684\u3002</p><p>\u8FD8\u662F\u7EE7\u7EED\u7528\u4E0A\u9762\u7684\u4F8B\u5B50\uFF0C state \u4E0A\u73B0\u5728\u6709 <code>message</code> \u548C <code>randomMessages</code> \u8FD9\u4E24\u4E2A\u6570\u636E\uFF0C\u90A3\u4E48\u8981\u5168\u91CF\u66F4\u65B0\u4E3A\u65B0\u7684\u503C\uFF0C\u5C31\u8FD9\u4E48\u64CD\u4F5C\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>store<span class="token punctuation">.</span>$state <span class="token operator">=</span> <span class="token punctuation">{</span>
  message<span class="token operator">:</span> <span class="token string">&#39;New Message&#39;</span><span class="token punctuation">,</span>
  randomMessages<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;msg1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;msg2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;msg3&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u540C\u6837\u7684\uFF0C\u5FC5\u987B\u9075\u5FAA state \u539F\u6709\u7684\u6570\u636E\u548C\u5BF9\u5E94\u7684\u7C7B\u578B\u3002</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>\u8BE5\u64CD\u4F5C\u4E0D\u4F1A\u4F7F state \u5931\u53BB\u54CD\u5E94\u6027\u3002</p></div><h3 id="\u91CD\u7F6E-state" tabindex="-1"><a class="header-anchor" href="#\u91CD\u7F6E-state" aria-hidden="true">#</a> \u91CD\u7F6E state</h3><p>Pinia \u63D0\u4F9B\u4E86\u4E00\u4E2A <code>$reset</code> API \u6302\u5728\u6BCF\u4E2A\u5B9E\u4F8B\u4E0A\u9762\uFF0C\u7528\u4E8E\u91CD\u7F6E\u6574\u9897 state \u6811\u4E3A\u521D\u59CB\u6570\u636E\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u8FD9\u4E2A store \u662F\u6211\u4EEC\u4E0A\u9762\u5B9A\u4E49\u597D\u7684\u5B9E\u4F8B</span>
store<span class="token punctuation">.</span><span class="token function">$reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u5177\u4F53\u4F8B\u5B50\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u4FEE\u6539\u6570\u636E</span>
store<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&#39;New Message&#39;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>message<span class="token punctuation">)</span>  <span class="token comment">// \u8F93\u51FA New Message</span>

<span class="token comment">// 3s \u540E\u91CD\u7F6E\u72B6\u6001</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  store<span class="token punctuation">.</span><span class="token function">$reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>message<span class="token punctuation">)</span>  <span class="token comment">// \u8F93\u51FA\u6700\u5F00\u59CB\u7684 Hello World</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="\u8BA2\u9605-state" tabindex="-1"><a class="header-anchor" href="#\u8BA2\u9605-state" aria-hidden="true">#</a> \u8BA2\u9605 state</h3><p>\u548C Vuex \u4E00\u6837\uFF0C Pinia \u4E5F\u63D0\u4F9B\u4E86\u4E00\u4E2A\u7528\u4E8E\u8BA2\u9605 state \u7684 <code>$subscribe</code> API \u3002</p><h4 id="\u8BA2\u9605-api-\u7684-ts-\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#\u8BA2\u9605-api-\u7684-ts-\u7C7B\u578B" aria-hidden="true">#</a> \u8BA2\u9605 API \u7684 TS \u7C7B\u578B</h4><p>\u5728\u4E86\u89E3\u8FD9\u4E2A API \u7684\u4F7F\u7528\u4E4B\u524D\uFF0C\u5148\u770B\u4E00\u4E0B\u5B83\u7684 TS \u7C7B\u578B\u5B9A\u4E49\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// $subscribe \u90E8\u5206\u7684 TS \u7C7B\u578B</span>
<span class="token comment">// ...</span>
<span class="token function">$subscribe</span><span class="token punctuation">(</span>
  callback<span class="token operator">:</span> SubscriptionCallback<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span> detached<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">}</span> <span class="token operator">&amp;</span> WatchOptions
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token comment">// ...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u5B83\u53EF\u4EE5\u63A5\u53D7\u4E24\u4E2A\u53C2\u6570\uFF1A</p><ol><li>\u7B2C\u4E00\u4E2A\u5165\u53C2\u662F callback \u51FD\u6570\uFF0C\u5FC5\u4F20</li><li>\u7B2C\u4E8C\u4E2A\u5165\u53C2\u662F\u4E00\u4E9B\u9009\u9879\uFF0C\u53EF\u9009</li></ol><p>\u5B83\u8FD8\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u51FD\u6570\uFF0C\u6267\u884C\u5B83\u53EF\u4EE5\u7528\u4E8E\u79FB\u9664\u5F53\u524D\u8BA2\u9605\uFF08\u6E90\u7801\u6709\u6CE8\u91CA\uFF0C\u8FD9\u91CC\u6211\u5148\u7701\u7565\uFF0C\u653E\u5728\u4E0B\u9762\u8BB2\uFF09\uFF0C\u4E0B\u9762\u6765\u770B\u770B\u5177\u4F53\u7528\u6CD5\u3002</p><h4 id="\u6DFB\u52A0\u8BA2\u9605" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0\u8BA2\u9605" aria-hidden="true">#</a> \u6DFB\u52A0\u8BA2\u9605</h4>`,22),ms=s("code",null,"$subscribe",-1),bs=n(" API \u7684\u529F\u80FD\u7C7B\u4F3C\u4E8E "),gs=n("watch"),hs=n(" \uFF0C\u4F46\u5B83\u53EA\u4F1A\u5728 state \u88AB\u66F4\u65B0\u7684\u65F6\u5019\u624D\u89E6\u53D1\u4E00\u6B21\uFF0C\u5E76\u4E14\u5728\u7EC4\u4EF6\u88AB\u5378\u8F7D\u65F6\u5220\u9664\uFF08\u53C2\u8003\uFF1A"),fs=n("\u7EC4\u4EF6\u7684\u751F\u547D\u5468\u671F"),_s=n("\uFF09\u3002"),ys=e(`<p>\u4ECE <a href="#%E8%AE%A2%E9%98%85-api-%E7%9A%84-ts-%E7%B1%BB%E5%9E%8B">\u8BA2\u9605 API \u7684 TS \u7C7B\u578B</a> \u53EF\u4EE5\u770B\u5230\uFF0C\u5B83\u53EF\u4EE5\u63A5\u53D7\u4E24\u4E2A\u53C2\u6570\uFF0C\u7B2C\u4E00\u4E2A\u53C2\u6570\u662F\u5FC5\u4F20\u7684 callback \u51FD\u6570\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\u9ED8\u8BA4\u7528\u8FD9\u4E2A\u65B9\u5F0F\u5373\u53EF\uFF0C\u4F7F\u7528\u4F8B\u5B50\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u4F60\u53EF\u4EE5\u5728 state \u51FA\u73B0\u53D8\u5316\u65F6\uFF0C\u66F4\u65B0\u672C\u5730\u6301\u4E45\u5316\u5B58\u50A8\u7684\u6570\u636E</span>
store<span class="token punctuation">.</span><span class="token function">$subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span>mutation<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&#39;store&#39;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u8FD9\u4E2A callback \u91CC\u9762\u6709 2 \u4E2A\u5165\u53C2\uFF1A</p><table><thead><tr><th style="text-align:center;">\u5165\u53C2</th><th style="text-align:center;">\u4F5C\u7528</th></tr></thead><tbody><tr><td style="text-align:center;">mutation</td><td style="text-align:center;">\u672C\u6B21\u4E8B\u4EF6\u7684\u4E00\u4E9B\u4FE1\u606F</td></tr><tr><td style="text-align:center;">state</td><td style="text-align:center;">\u5F53\u524D\u5B9E\u4F8B\u7684 state</td></tr></tbody></table><p>\u5176\u4E2D mutation \u5305\u542B\u4E86\u4EE5\u4E0B\u6570\u636E\uFF1A</p><table><thead><tr><th style="text-align:center;">\u5B57\u6BB5</th><th style="text-align:left;">\u503C</th></tr></thead><tbody><tr><td style="text-align:center;">storeId</td><td style="text-align:left;">\u53D1\u5E03\u672C\u6B21\u8BA2\u9605\u901A\u77E5\u7684 Pinia \u5B9E\u4F8B\u7684\u552F\u4E00 ID\uFF08\u7531 <a href="#%E5%88%9B%E5%BB%BA-store-new">\u521B\u5EFA Store</a> \u65F6\u6307\u5B9A\uFF09</td></tr><tr><td style="text-align:center;">type</td><td style="text-align:left;">\u6709 3 \u4E2A\u503C\uFF1A\u8FD4\u56DE <code>direct</code> \u4EE3\u8868 <a href="#%E8%8E%B7%E5%8F%96%E5%92%8C%E6%9B%B4%E6%96%B0-state">\u76F4\u63A5\u66F4\u6539</a> \u6570\u636E\uFF1B\u8FD4\u56DE <code>patch object</code> \u4EE3\u8868\u662F\u901A\u8FC7 <a href="#%E4%BC%A0%E5%85%A5%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1">\u4F20\u5165\u4E00\u4E2A\u5BF9\u8C61</a> \u66F4\u6539\uFF1B\u8FD4\u56DE <code>patch function</code> \u5219\u4EE3\u8868\u662F\u901A\u8FC7 <a href="#%E4%BC%A0%E5%85%A5%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0">\u4F20\u5165\u4E00\u4E2A\u51FD\u6570</a> \u66F4\u6539</td></tr><tr><td style="text-align:center;">events</td><td style="text-align:left;">\u89E6\u53D1\u672C\u6B21\u8BA2\u9605\u901A\u77E5\u7684\u4E8B\u4EF6\u5217\u8868</td></tr><tr><td style="text-align:center;">payload</td><td style="text-align:left;">\u901A\u8FC7 <a href="#%E4%BC%A0%E5%85%A5%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0">\u4F20\u5165\u4E00\u4E2A\u51FD\u6570</a> \u66F4\u6539\u65F6\uFF0C\u4F20\u9012\u8FDB\u6765\u7684\u8377\u8F7D\u4FE1\u606F\uFF0C\u53EA\u6709 <code>type</code> \u4E3A <code>patch object</code> \u65F6\u624D\u6709</td></tr></tbody></table><p>\u5982\u679C\u4F60\u4E0D\u5E0C\u671B\u7EC4\u4EF6\u88AB\u5378\u8F7D\u65F6\u5220\u9664\u8BA2\u9605\uFF0C\u53EF\u4EE5\u4F20\u9012\u7B2C\u4E8C\u4E2A\u53C2\u6570 options \u7528\u4EE5\u4FDD\u7559\u8BA2\u9605\u72B6\u6001\uFF0C\u4F20\u5165\u4E00\u4E2A\u5BF9\u8C61\u3002</p><p>\u53EF\u4EE5\u7B80\u5355\u6307\u5B9A\u4E3A <code>{ detached: true }</code> \uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>store<span class="token punctuation">.</span><span class="token function">$subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span>mutation<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> detached<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u4E5F\u53EF\u4EE5\u642D\u914D watch API \u7684\u9009\u9879\u4E00\u8D77\u7528\u3002</p><h4 id="\u79FB\u9664\u8BA2\u9605" tabindex="-1"><a class="header-anchor" href="#\u79FB\u9664\u8BA2\u9605" aria-hidden="true">#</a> \u79FB\u9664\u8BA2\u9605</h4><p>\u5728 <a href="#%E6%B7%BB%E5%8A%A0%E8%AE%A2%E9%98%85">\u6DFB\u52A0\u8BA2\u9605</a> \u90E8\u5206\u5DF2\u4E86\u89E3\u8FC7\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u7EC4\u4EF6\u88AB\u5378\u8F7D\u65F6\u8BA2\u9605\u4E5F\u4F1A\u88AB\u4E00\u5E76\u79FB\u9664\uFF0C\u4F46\u5982\u679C\u4F60\u4E4B\u524D\u542F\u7528\u4E86 <code>detached</code> \u9009\u9879\uFF0C\u5C31\u9700\u8981\u624B\u52A8\u53D6\u6D88\u4E86\u3002</p><p>\u524D\u9762\u5728 <a href="#%E8%AE%A2%E9%98%85-api-%E7%9A%84-ts-%E7%B1%BB%E5%9E%8B">\u8BA2\u9605 API \u7684 TS \u7C7B\u578B</a> \u91CC\u63D0\u5230\uFF0C\u5728\u542F\u7528 <code>$subscribe</code> API \u4E4B\u540E\uFF0C\u4F1A\u6709\u4E00\u4E2A\u51FD\u6570\u4F5C\u4E3A\u8FD4\u56DE\u503C\uFF0C\u8FD9\u4E2A\u51FD\u6570\u53EF\u4EE5\u7528\u6765\u53D6\u6D88\u8BE5\u8BA2\u9605\u3002</p><p>\u7528\u6CD5\u975E\u5E38\u7B80\u5355\uFF0C\u505A\u4E00\u4E0B\u7B80\u5355\u4E86\u89E3\u5373\u53EF\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u5B9A\u4E49\u4E00\u4E2A\u9000\u8BA2\u53D8\u91CF\uFF0C\u5B83\u662F\u4E00\u4E2A\u51FD\u6570</span>
<span class="token keyword">const</span> unsubscribe <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">$subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span>mutation<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> detached<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// \u5728\u5408\u9002\u7684\u65F6\u671F\u8C03\u7528\u5B83\uFF0C\u53EF\u4EE5\u53D6\u6D88\u8FD9\u4E2A\u8BA2\u9605</span>
<span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div>`,15),vs=n("\u8DDF watch API \u7684\u673A\u5236\u975E\u5E38\u76F8\u4F3C\uFF0C \u5B83\u4E5F\u662F\u8FD4\u56DE "),ws=n("\u4E00\u4E2A\u53D6\u6D88\u76D1\u542C\u7684\u51FD\u6570"),xs=n(" \u7528\u4E8E\u79FB\u9664\u6307\u5B9A\u7684 watch \u3002"),Ss=e('<h2 id="\u7BA1\u7406-getters-new" tabindex="-1"><a class="header-anchor" href="#\u7BA1\u7406-getters-new" aria-hidden="true">#</a> \u7BA1\u7406 getters{new}</h2><p>\u5728 <a href="#%E7%8A%B6%E6%80%81%E6%A0%91%E7%9A%84%E7%BB%93%E6%9E%84">\u72B6\u6001\u6811\u7684\u7ED3\u6784</a> \u4E86\u89E3\u8FC7\uFF0C Pinia \u7684 <code>getters</code> \u662F\u7528\u6765\u8BA1\u7B97\u6570\u636E\u7684\u3002</p><h3 id="\u7ED9-store-\u6DFB\u52A0-getter" tabindex="-1"><a class="header-anchor" href="#\u7ED9-store-\u6DFB\u52A0-getter" aria-hidden="true">#</a> \u7ED9 Store \u6DFB\u52A0 getter</h3>',3),Es={class:"custom-container tip"},As=s("p",{class:"custom-container-title"},"TIP",-1),Bs=n("\u5982\u679C\u5BF9 Vue \u7684\u8BA1\u7B97\u6570\u636E\u4E0D\u662F\u5F88\u719F\u6089\u6216\u8005\u6CA1\u63A5\u89E6\u8FC7\u7684\u8BDD\uFF0C\u53EF\u4EE5\u5148\u9605\u8BFB "),Ps=n("\u6570\u636E\u7684\u8BA1\u7B97"),Is=n(" \u8FD9\u4E00\u8282\uFF0C\u4EE5\u4FBF\u6709\u4E2A\u521D\u6B65\u5370\u8C61\uFF0C\u4E0D\u4F1A\u4E91\u91CC\u96FE\u91CC\u3002"),Ms=e(`<h4 id="\u6DFB\u52A0\u666E\u901A\u7684-getter" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0\u666E\u901A\u7684-getter" aria-hidden="true">#</a> \u6DFB\u52A0\u666E\u901A\u7684 getter</h4><p>\u6211\u4EEC\u7EE7\u7EED\u7528\u521A\u624D\u7684 <code>message</code> \uFF0C\u6765\u5B9A\u4E49\u4E00\u4E2A Getter \uFF0C\u7528\u4E8E\u8FD4\u56DE\u4E00\u53E5\u62FC\u63A5\u597D\u7684\u53E5\u5B50\u3002</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// src/stores/index.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&#39;main&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    message<span class="token operator">:</span> <span class="token string">&#39;Hello World&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// \u5B9A\u4E49\u4E00\u4E2A fullMessage \u7684\u8BA1\u7B97\u6570\u636E</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">fullMessage</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">The message is &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>state<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div>`,3),qs=n("\u548C "),Ts=n("Options API \u7684 Computed"),Vs=n(" \u5199\u6CD5\u4E00\u6837\uFF0C\u4E5F\u662F\u901A\u8FC7\u51FD\u6570\u6765\u8FD4\u56DE\u8BA1\u7B97\u540E\u7684\u503C\uFF0C\u4F46\u5728 Pinia \uFF0C\u53EA\u80FD\u4F7F\u7528\u7BAD\u5934\u51FD\u6570\uFF0C\u901A\u8FC7\u5165\u53C2\u7684 "),Cs=s("code",null,"state",-1),Ns=n(" \u6765\u62FF\u5230\u5F53\u524D\u5B9E\u4F8B\u7684\u6570\u636E\u3002"),Rs=e(`<h4 id="\u6DFB\u52A0\u5F15\u7528-getter-\u7684-getter" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0\u5F15\u7528-getter-\u7684-getter" aria-hidden="true">#</a> \u6DFB\u52A0\u5F15\u7528 getter \u7684 getter</h4><p>\u6709\u65F6\u5019\u4F60\u53EF\u80FD\u8981\u5F15\u7528\u53E6\u5916\u4E00\u4E2A getter \u7684\u503C\u6765\u8FD4\u56DE\u6570\u636E\uFF0C\u8FD9\u4E2A\u65F6\u5019\u4E0D\u80FD\u7528\u7BAD\u5934\u51FD\u6570\u4E86\uFF0C\u9700\u8981\u5B9A\u4E49\u6210\u666E\u901A\u51FD\u6570\u800C\u4E0D\u662F\u7BAD\u5934\u51FD\u6570\uFF0C\u5E76\u5728\u51FD\u6570\u5185\u90E8\u901A\u8FC7 <code>this</code> \u6765\u8C03\u7528\u5F53\u524D Store \u4E0A\u7684\u6570\u636E\u548C\u65B9\u6CD5\u3002</p><p>\u6211\u4EEC\u7EE7\u7EED\u5728\u4E0A\u9762\u7684\u4F8B\u5B50\u91CC\uFF0C\u6DFB\u52A0\u591A\u4E00\u4E2A <code>emojiMessage</code> \u7684 getter \uFF0C\u5728\u8FD4\u56DE <code>fullMessage</code> \u7684\u7ED3\u679C\u7684\u540C\u65F6\uFF0C\u62FC\u63A5\u591A\u4E00\u4E32 emoji \u3002</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> useStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&#39;main&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    message<span class="token operator">:</span> <span class="token string">&#39;Hello World&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">fullMessage</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">The message is &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>state<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
    <span class="token comment">// \u8FD9\u4E2A getter \u8FD4\u56DE\u4E86\u53E6\u5916\u4E00\u4E2A getter \u7684\u7ED3\u679C</span>
    <span class="token function">emojiMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">\u{1F389}\u{1F389}\u{1F389} </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">this</span><span class="token punctuation">.</span>fullMessage<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u5982\u679C\u4F60\u53EA\u5199 JavaScript \uFF0C\u53EF\u80FD\u5BF9\u8FD9\u4E00\u6761\u6240\u8BF4\u7684\u9650\u5236\u89C9\u5F97\u5F88\u5947\u602A\uFF0C\u4E8B\u5B9E\u4E0A\u7528 JS \u5199\u7BAD\u5934\u51FD\u6570\u6765\u5F15\u7528\u786E\u5B9E\u4E0D\u4F1A\u62A5\u9519\uFF0C\u4F46\u5982\u679C\u4F60\u7528\u7684\u662F TypeScript \uFF0C\u4E0D\u6309\u7167\u8FD9\u4E2A\u5199\u6CD5\uFF0C\u5728 VSCode \u63D0\u793A\u548C\u6267\u884C TSC \u68C0\u67E5\u7684\u65F6\u5019\u90FD\u4F1A\u7ED9\u4F60\u629B\u51FA\u4E00\u6761\u9519\u8BEF\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>src/stores/index.ts:9:42 - error TS2339: 
Property <span class="token string">&#39;fullMessage&#39;</span> does not exist on <span class="token builtin class-name">type</span> <span class="token string">&#39;{ message: string; } &amp; {}&#39;</span><span class="token builtin class-name">.</span>

<span class="token number">9</span>     emojiMessage: <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable"><span class="token variable">\`</span>\u{1F389}\u{1F389}\u{1F389} $<span class="token punctuation">{</span>state.fullMessage<span class="token punctuation">}</span><span class="token variable">\`</span></span>,
                                           ~~~~~~~~~~~


Found <span class="token number">1</span> error <span class="token keyword">in</span> src/stores/index.ts:9
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u53E6\u5916\u5173\u4E8E\u666E\u901A\u51FD\u6570\u7684 TS \u8FD4\u56DE\u7C7B\u578B\uFF0C\u5B98\u65B9\u5EFA\u8BAE\u663E\u5F0F\u7684\u8FDB\u884C\u6807\u6CE8\uFF0C\u5C31\u50CF\u8FD9\u4E2A\u4F8B\u5B50\u91CC\u7684 <code>emojiMessage(): string</code> \u91CC\u7684 <code>: string</code> \u3002</p><h4 id="\u7ED9-getter-\u4F20\u9012\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#\u7ED9-getter-\u4F20\u9012\u53C2\u6570" aria-hidden="true">#</a> \u7ED9 getter \u4F20\u9012\u53C2\u6570</h4><p>getter \u672C\u8EAB\u662F\u4E0D\u652F\u6301\u53C2\u6570\u7684\uFF0C\u4F46\u548C Vuex \u4E00\u6837\uFF0C\u652F\u6301\u8FD4\u56DE\u4E00\u4E2A\u5177\u5907\u5165\u53C2\u7684\u51FD\u6570\uFF0C\u7528\u6765\u6EE1\u8DB3\u9700\u6C42\u3002</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&#39;main&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    message<span class="token operator">:</span> <span class="token string">&#39;Hello World&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5B9A\u4E49\u4E00\u4E2A\u63A5\u6536\u5165\u53C2\u7684\u51FD\u6570\u4F5C\u4E3A\u8FD4\u56DE\u503C</span>
    <span class="token function-variable function">signedMessage</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> say: &quot;The message is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>state<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;.</span><span class="token template-punctuation string">\`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>\u8C03\u7528\u7684\u65F6\u5019\u662F\u8FD9\u6837\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> signedMessage <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">signedMessage</span><span class="token punctuation">(</span><span class="token string">&#39;Petter&#39;</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;signedMessage&#39;</span><span class="token punctuation">,</span> signedMessage<span class="token punctuation">)</span>
<span class="token comment">// Petter say: &quot;The message is Hello World&quot;.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u8FD9\u4E2A getter \u53EA\u662F\u8C03\u7528\u7684\u51FD\u6570\u7684\u4F5C\u7528\uFF0C\u4E0D\u518D\u6709\u7F13\u5B58\uFF0C\u5982\u679C\u4F60\u901A\u8FC7\u53D8\u91CF\u5B9A\u4E49\u4E86\u8FD9\u4E2A\u6570\u636E\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u53D8\u91CF\u4E5F\u53EA\u662F\u666E\u901A\u53D8\u91CF\uFF0C\u4E0D\u5177\u5907\u54CD\u5E94\u6027\u3002</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u901A\u8FC7\u53D8\u91CF\u5B9A\u4E49\u4E00\u4E2A\u503C</span>
<span class="token keyword">const</span> signedMessage <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">signedMessage</span><span class="token punctuation">(</span><span class="token string">&#39;Petter&#39;</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;signedMessage&#39;</span><span class="token punctuation">,</span> signedMessage<span class="token punctuation">)</span>
<span class="token comment">// Petter say: &quot;The message is Hello World&quot;.</span>

<span class="token comment">// 2s \u540E\u6539\u53D8 message</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  store<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&#39;New Message&#39;</span>

  <span class="token comment">// signedMessage \u4E0D\u4F1A\u53D8</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;signedMessage&#39;</span><span class="token punctuation">,</span> signedMessage<span class="token punctuation">)</span>
  <span class="token comment">// Petter say: &quot;The message is Hello World&quot;.</span>

  <span class="token comment">// \u5FC5\u987B\u8FD9\u6837\u518D\u6B21\u6267\u884C\u624D\u80FD\u62FF\u5230\u66F4\u65B0\u540E\u7684\u503C</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;signedMessage&#39;</span><span class="token punctuation">,</span> store<span class="token punctuation">.</span><span class="token function">signedMessage</span><span class="token punctuation">(</span><span class="token string">&#39;Petter&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token comment">// Petter say: &quot;The message is New Message&quot;.</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="\u83B7\u53D6\u548C\u66F4\u65B0-getter" tabindex="-1"><a class="header-anchor" href="#\u83B7\u53D6\u548C\u66F4\u65B0-getter" aria-hidden="true">#</a> \u83B7\u53D6\u548C\u66F4\u65B0 getter</h3><p>getter \u548C state \u90FD\u5C5E\u4E8E\u6570\u636E\u7BA1\u7406\uFF0C\u8BFB\u53D6\u548C\u8D4B\u503C\u7684\u65B9\u6CD5\u662F\u4E00\u6837\u7684\uFF0C\u8BF7\u53C2\u8003\u4E0A\u65B9 <a href="#%E8%8E%B7%E5%8F%96%E5%92%8C%E6%9B%B4%E6%96%B0-state-new">\u83B7\u53D6\u548C\u66F4\u65B0 state</a> \u4E00\u8282\u7684\u5185\u5BB9\u3002</p><h2 id="\u7BA1\u7406-actions-new" tabindex="-1"><a class="header-anchor" href="#\u7BA1\u7406-actions-new" aria-hidden="true">#</a> \u7BA1\u7406 actions{new}</h2><p>\u5728 <a href="#%E7%8A%B6%E6%80%81%E6%A0%91%E7%9A%84%E7%BB%93%E6%9E%84">\u72B6\u6001\u6811\u7684\u7ED3\u6784</a> \u63D0\u5230\u4E86\uFF0C Pinia \u53EA\u9700\u8981\u7528 <code>actions</code> \u5C31\u53EF\u4EE5\u89E3\u51B3\u5404\u79CD\u6570\u636E\u64CD\u4F5C\uFF0C\u65E0\u9700\u50CF Vuex \u4E00\u6837\u533A\u5206\u4E3A <code>mutations / actions</code> \u4E24\u5927\u7C7B\u3002</p><h3 id="\u7ED9-store-\u6DFB\u52A0-action" tabindex="-1"><a class="header-anchor" href="#\u7ED9-store-\u6DFB\u52A0-action" aria-hidden="true">#</a> \u7ED9 Store \u6DFB\u52A0 action</h3><p>\u4F60\u53EF\u4EE5\u4E3A\u5F53\u524D Store \u5C01\u88C5\u4E00\u4E9B\u53EF\u4EE5\u5F00\u7BB1\u5373\u7528\u7684\u65B9\u6CD5\uFF0C\u652F\u6301\u540C\u6B65\u548C\u5F02\u6B65\u3002</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// src/stores/index.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&#39;main&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    message<span class="token operator">:</span> <span class="token string">&#39;Hello World&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5F02\u6B65\u66F4\u65B0 message</span>
    <span class="token keyword">async</span> <span class="token function">updateMessage</span><span class="token punctuation">(</span>newMessage<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u8FD9\u91CC\u7684 this \u662F\u5F53\u524D\u7684 Store \u5B9E\u4F8B</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> newMessage
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;Async done.&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// \u540C\u6B65\u66F4\u65B0 message</span>
    <span class="token function">updateMessageSync</span><span class="token punctuation">(</span>newMessage<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u8FD9\u91CC\u7684 this \u662F\u5F53\u524D\u7684 Store \u5B9E\u4F8B</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> newMessage
      <span class="token keyword">return</span> <span class="token string">&#39;Sync done.&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u5728 action \u91CC\uFF0C\u5982\u679C\u8981\u8BBF\u95EE\u5F53\u524D\u5B9E\u4F8B\u7684 state \u6216\u8005 getter \uFF0C\u53EA\u9700\u8981\u901A\u8FC7 <code>this</code> \u5373\u53EF\u64CD\u4F5C\uFF0C\u65B9\u6CD5\u7684\u5165\u53C2\u5B8C\u5168\u4E0D\u518D\u53D7 Vuex \u90A3\u6837\u6709\u56FA\u5B9A\u5F62\u5F0F\u7684\u56F0\u6270\u3002</p>`,22),Ws={class:"custom-container tip"},Fs=s("p",{class:"custom-container-title"},"TIP",-1),$s=n("\u5728 action \u91CC\uFF0C "),Ds=s("code",null,"this",-1),Hs=n(" \u662F\u5F53\u524D\u7684 Store \u5B9E\u4F8B\uFF0C\u6240\u4EE5\u5982\u679C\u4F60\u7684 action \u65B9\u6CD5\u91CC\u6709\u5176\u4ED6\u51FD\u6570\u4E5F\u8981\u8C03\u7528\u5B9E\u4F8B\uFF0C\u8BF7\u8BB0\u5F97\u5199\u6210 "),js={href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions",target:"_blank",rel:"noopener noreferrer"},zs=n("\u7BAD\u5934\u51FD\u6570"),Gs=n(" \u6765\u63D0\u5347 this \u3002"),Js=e(`<h3 id="\u8C03\u7528-action" tabindex="-1"><a class="header-anchor" href="#\u8C03\u7528-action" aria-hidden="true">#</a> \u8C03\u7528 action</h3><p>\u50CF\u666E\u901A\u7684\u51FD\u6570\u4E00\u6837\u4F7F\u7528\u5373\u53EF\uFF0C\u4E0D\u9700\u8981\u548C Vuex \u4E00\u6837\u6267\u884C commit \u6216\u8005 dispatch\uFF0C\u5728 Pinia \uFF0C\u4E0D\u9700\u8981\uFF0C\u4E0D\u9700\u8981\u3002</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">storeToRefs</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span>

    <span class="token comment">// \u7ACB\u5373\u6267\u884C</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">updateMessageSync</span><span class="token punctuation">(</span><span class="token string">&#39;New message by sync.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// 3s \u540E\u6267\u884C</span>
    store<span class="token punctuation">.</span><span class="token function">updateMessage</span><span class="token punctuation">(</span><span class="token string">&#39;New message by async.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="\u6DFB\u52A0\u591A\u4E2A-store-new" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0\u591A\u4E2A-store-new" aria-hidden="true">#</a> \u6DFB\u52A0\u591A\u4E2A Store{new}</h2><p>\u5230\u8FD9\u91CC\uFF0C\u5BF9\u5355\u4E2A Store \u7684\u914D\u7F6E\u548C\u8C03\u7528\u76F8\u4FE1\u90FD\u5DF2\u7ECF\u6E05\u695A\u4E86\uFF0C\u5B9E\u9645\u9879\u76EE\u4E2D\u4F1A\u6D89\u53CA\u5230\u5F88\u591A\u6570\u636E\u64CD\u4F5C\uFF0C\u8FD8\u53EF\u4EE5\u7528\u591A\u4E2A Store \u6765\u7EF4\u62A4\u4E0D\u540C\u9700\u6C42\u6A21\u5757\u7684\u6570\u636E\u72B6\u6001\u3002</p>`,5),Us=n("\u8FD9\u4E00\u70B9\u548C Vuex \u7684 "),Ls={href:"https://vuex.vuejs.org/zh/guide/modules.html",target:"_blank",rel:"noopener noreferrer"},Os=n("Module"),Ks=n(" \u6BD4\u8F83\u76F8\u4F3C\uFF0C\u76EE\u7684\u90FD\u662F\u4E3A\u4E86\u907F\u514D\u72B6\u6001\u6811\u8FC7\u4E8E\u81C3\u80BF\uFF0C\u4F46\u7528\u8D77\u6765\u4F1A\u66F4\u4E3A\u7B80\u5355\u3002"),Qs=e(`<h3 id="\u76EE\u5F55\u7ED3\u6784\u5EFA\u8BAE" tabindex="-1"><a class="header-anchor" href="#\u76EE\u5F55\u7ED3\u6784\u5EFA\u8BAE" aria-hidden="true">#</a> \u76EE\u5F55\u7ED3\u6784\u5EFA\u8BAE</h3><p>\u5EFA\u8BAE\u7EDF\u4E00\u5B58\u653E\u5728 <code>src/stores</code> \u4E0B\u9762\u7BA1\u7406\uFF0C\u6839\u636E\u4E1A\u52A1\u9700\u8981\u8FDB\u884C\u547D\u540D\uFF0C\u6BD4\u5982 <code>user</code> \u5C31\u7528\u6765\u7BA1\u7406\u767B\u5F55\u7528\u6237\u76F8\u5173\u7684\u72B6\u6001\u6570\u636E\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>src
\u2514\u2500stores
  \u2502 <span class="token comment"># \u5165\u53E3\u6587\u4EF6</span>
  \u251C\u2500index.ts
  \u2502 <span class="token comment"># \u591A\u4E2A store</span>
  \u251C\u2500user.ts
  \u251C\u2500game.ts
  \u2514\u2500news.ts
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u91CC\u9762\u66B4\u9732\u7684\u65B9\u6CD5\u5C31\u7EDF\u4E00\u4EE5 <code>use</code> \u5F00\u5934\u52A0\u4E0A\u6587\u4EF6\u540D\uFF0C\u5E76\u4EE5 <code>Store</code> \u7ED3\u5C3E\uFF0C\u4F5C\u4E3A\u5C0F\u9A7C\u5CF0\u5199\u6CD5\uFF0C\u6BD4\u5982 <code>user</code> \u8FD9\u4E2A Store \u6587\u4EF6\u91CC\u9762\u5BFC\u51FA\u7684\u51FD\u6570\u540D\u5C31\u662F\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// src/stores/user.ts</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useUserStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u7136\u540E\u4EE5 <code>index.ts</code> \u91CC\u4F5C\u4E3A\u7EDF\u4E00\u7684\u5165\u53E3\u6587\u4EF6\uFF0C <code>index.ts</code> \u91CC\u7684\u4EE3\u7801\u5199\u4E3A\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&#39;./user&#39;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&#39;./game&#39;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&#39;./news&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u8FD9\u6837\u5728\u4F7F\u7528\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u4ECE <code>@/stores</code> \u91CC\u5BFC\u5165\u5373\u53EF\uFF0C\u65E0\u9700\u5199\u5B8C\u6574\u7684\u8DEF\u5F84\uFF0C\u4F8B\u5982\uFF0C\u53EA\u9700\u8981\u8FD9\u6837\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/stores&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u800C\u65E0\u9700\u8FD9\u6837\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/stores/user&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="\u5728-vue-\u7EC4\u4EF6-ts-\u6587\u4EF6\u91CC\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u5728-vue-\u7EC4\u4EF6-ts-\u6587\u4EF6\u91CC\u4F7F\u7528" aria-hidden="true">#</a> \u5728 Vue \u7EC4\u4EF6 / TS \u6587\u4EF6\u91CC\u4F7F\u7528</h3><p>\u8FD9\u91CC\u6211\u4EE5\u4E00\u4E2A\u6BD4\u8F83\u7B80\u5355\u7684\u4E1A\u52A1\u573A\u666F\u4E3E\u4F8B\uFF0C\u5E0C\u671B\u80FD\u591F\u65B9\u4FBF\u7684\u7406\u89E3\u5982\u4F55\u540C\u65F6\u4F7F\u7528\u591A\u4E2A Store \u3002</p><p>\u5047\u8BBE\u76EE\u524D\u6709\u4E00\u4E2A <code>userStore</code> \u662F\u7BA1\u7406\u5F53\u524D\u767B\u5F55\u7528\u6237\u4FE1\u606F\uFF0C <code>gameStore</code> \u662F\u7BA1\u7406\u6E38\u620F\u7684\u4FE1\u606F\uFF0C\u800C \u201C\u4E2A\u4EBA\u4E2D\u5FC3\u201D \u8FD9\u4E2A\u9875\u9762\u9700\u8981\u5C55\u793A \u201C\u7528\u6237\u4FE1\u606F\u201D \uFF0C\u4EE5\u53CA \u201C\u8BE5\u7528\u6237\u7ED1\u5B9A\u7684\u6E38\u620F\u4FE1\u606F\u201D\uFF0C\u90A3\u4E48\u5C31\u53EF\u4EE5\u8FD9\u6837\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> storeToRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>
<span class="token comment">// \u8FD9\u91CC\u5BFC\u5165\u4F60\u8981\u7528\u5230\u7684 Store</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore<span class="token punctuation">,</span> useGameStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/stores&#39;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> GameItem <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/types&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5148\u4ECE userStore \u83B7\u53D6\u7528\u6237\u4FE1\u606F\uFF08\u5DF2\u7ECF\u767B\u5F55\u8FC7\uFF0C\u6240\u4EE5\u53EF\u4EE5\u76F4\u63A5\u62FF\u5230\uFF09</span>
    <span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> userId<span class="token punctuation">,</span> userName <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">storeToRefs</span><span class="token punctuation">(</span>userStore<span class="token punctuation">)</span>

    <span class="token comment">// \u4F7F\u7528 gameStore \u91CC\u7684\u65B9\u6CD5\uFF0C\u4F20\u5165\u7528\u6237 ID \u53BB\u67E5\u8BE2\u7528\u6237\u7684\u6E38\u620F\u5217\u8868</span>
    <span class="token keyword">const</span> gameStore <span class="token operator">=</span> <span class="token function">useGameStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> gameList <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span>GameItem<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      gameList<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> gameStore<span class="token punctuation">.</span><span class="token function">queryGameList</span><span class="token punctuation">(</span>userId<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      userId<span class="token punctuation">,</span>
      userName<span class="token punctuation">,</span>
      gameList<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>\u518D\u6B21\u63D0\u9192\uFF0C\u5207\u8BB0\u6BCF\u4E2A Store \u7684 ID \u5FC5\u987B\u4E0D\u540C\uFF0C\u5982\u679C ID \u91CD\u590D\uFF0C\u5728\u540C\u4E00\u4E2A Vue \u7EC4\u4EF6 / TS \u6587\u4EF6\u91CC\u5B9A\u4E49 Store \u5B9E\u4F8B\u53D8\u91CF\u7684\u65F6\u5019\uFF0C\u4F1A\u4EE5\u5148\u5B9A\u4E49\u7684\u4E3A\u6709\u6548\u503C\uFF0C\u540E\u7EED\u5B9A\u4E49\u7684\u4F1A\u548C\u524D\u9762\u4E00\u6837\u3002</p><p>\u5982\u679C\u5148\u5B9A\u4E49\u4E86 userStore :</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u5047\u8BBE\u4E24\u4E2A Store \u7684 ID \u4E00\u6837</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// \u662F\u60F3\u8981\u7684 Store</span>
<span class="token keyword">const</span> gameStore <span class="token operator">=</span> <span class="token function">useGameStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// \u5F97\u5230\u7684\u4F9D\u7136\u662F userStore \u7684\u90A3\u4E2A Store</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u5982\u679C\u5148\u5B9A\u4E49\u4E86 gameStore :</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u5047\u8BBE\u4E24\u4E2A Store \u7684 ID \u4E00\u6837</span>
<span class="token keyword">const</span> gameStore <span class="token operator">=</span> <span class="token function">useGameStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// \u662F\u60F3\u8981\u7684 Store</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// \u5F97\u5230\u7684\u4F9D\u7136\u662F gameStore \u7684\u90A3\u4E2A Store</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="store-\u4E4B\u95F4\u4E92\u76F8\u5F15\u7528" tabindex="-1"><a class="header-anchor" href="#store-\u4E4B\u95F4\u4E92\u76F8\u5F15\u7528" aria-hidden="true">#</a> Store \u4E4B\u95F4\u4E92\u76F8\u5F15\u7528</h3><p>\u5982\u679C\u5728\u5B9A\u4E49\u4E00\u4E2A Store \u7684\u65F6\u5019\uFF0C\u8981\u5F15\u7528\u53E6\u5916\u4E00\u4E2A Store \u7684\u6570\u636E\uFF0C\u4E5F\u662F\u5F88\u7B80\u5355\uFF0C\u6211\u4EEC\u56DE\u5230\u90A3\u4E2A message \u7684\u4F8B\u5B50\uFF0C\u6211\u4EEC\u6DFB\u52A0\u4E00\u4E2A getter \uFF0C\u5B83\u4F1A\u8FD4\u56DE\u4E00\u53E5\u95EE\u5019\u8BED\u6B22\u8FCE\u7528\u6237\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// src/stores/message.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>

<span class="token comment">// \u5BFC\u5165\u7528\u6237\u4FE1\u606F\u7684 Store \u5E76\u542F\u7528\u5B83</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./user&#39;</span>
<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useMessageStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    message<span class="token operator">:</span> <span class="token string">&#39;Hello World&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u8FD9\u91CC\u6211\u4EEC\u5C31\u53EF\u4EE5\u76F4\u63A5\u5F15\u7528 userStore \u4E0A\u9762\u7684\u6570\u636E\u4E86</span>
    <span class="token function-variable function">greeting</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Welcome, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>userStore<span class="token punctuation">.</span>userName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>\u5047\u8BBE\u73B0\u5728 <code>userName</code> \u662F Petter \uFF0C\u90A3\u4E48\u4F60\u4F1A\u5F97\u5230\u4E00\u53E5\u5BF9 Petter \u7684\u95EE\u5019\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> messageStore <span class="token operator">=</span> <span class="token function">useMessageStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>messageStore<span class="token punctuation">.</span>greeting<span class="token punctuation">)</span>  <span class="token comment">// Welcome, Petter!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="\u4E13\u5C5E\u63D2\u4EF6\u7684\u4F7F\u7528-new" tabindex="-1"><a class="header-anchor" href="#\u4E13\u5C5E\u63D2\u4EF6\u7684\u4F7F\u7528-new" aria-hidden="true">#</a> \u4E13\u5C5E\u63D2\u4EF6\u7684\u4F7F\u7528{new}</h2><p>Pinia \u62E5\u6709\u975E\u5E38\u7075\u6D3B\u7684\u53EF\u6269\u5C55\u6027\uFF0C\u6709\u4E13\u5C5E\u63D2\u4EF6\u53EF\u4EE5\u5F00\u7BB1\u5373\u7528\u6EE1\u8DB3\u66F4\u591A\u7684\u9700\u6C42\u573A\u666F\u3002</p><h3 id="\u5982\u4F55\u67E5\u627E\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5982\u4F55\u67E5\u627E\u63D2\u4EF6" aria-hidden="true">#</a> \u5982\u4F55\u67E5\u627E\u63D2\u4EF6</h3><p>\u63D2\u4EF6\u6709\u7EDF\u4E00\u7684\u547D\u540D\u683C\u5F0F <code>pinia-plugin-*</code> \uFF0C\u6240\u4EE5\u4F60\u53EF\u4EE5\u5728 npmjs \u4E0A\u641C\u7D22\u8FD9\u4E2A\u5173\u952E\u8BCD\u6765\u67E5\u8BE2\u76EE\u524D\u6709\u54EA\u4E9B\u63D2\u4EF6\u5DF2\u53D1\u5E03\u3002</p>`,29),Xs=n("\u70B9\u51FB\u67E5\u8BE2\uFF1A "),Ys={href:"https://www.npmjs.com/search?q=pinia-plugin",target:"_blank",rel:"noopener noreferrer"},Zs=n("pinia-plugin - npmjs"),na=s("h3",{id:"\u5982\u4F55\u4F7F\u7528\u63D2\u4EF6",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u5982\u4F55\u4F7F\u7528\u63D2\u4EF6","aria-hidden":"true"},"#"),n(" \u5982\u4F55\u4F7F\u7528\u63D2\u4EF6")],-1),sa=n("\u8FD9\u91CC\u4EE5 "),aa={href:"https://www.npmjs.com/package/pinia-plugin-persistedstate",target:"_blank",rel:"noopener noreferrer"},ea=n("pinia-plugin-persistedstate"),ta=n(" \u4E3A\u4F8B\uFF0C\u8FD9\u662F\u4E00\u4E2A\u8BA9\u6570\u636E\u6301\u4E45\u5316\u5B58\u50A8\u7684 Pinia \u63D2\u4EF6\u3002"),pa={class:"custom-container tip"},oa=s("p",{class:"custom-container-title"},"TIP",-1),ca=n("\u6570\u636E\u6301\u4E45\u5316\u5B58\u50A8\uFF0C\u6307\u9875\u9762\u5173\u95ED\u540E\u518D\u6253\u5F00\uFF0C\u6D4F\u89C8\u5668\u4F9D\u7136\u53EF\u4EE5\u8BB0\u5F55\u4E4B\u524D\u4FDD\u5B58\u7684\u672C\u5730\u6570\u636E\uFF0C\u4F8B\u5982\uFF1A\u6D4F\u89C8\u5668\u539F\u751F\u7684 "),la={href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/localStorage",target:"_blank",rel:"noopener noreferrer"},ra=n("localStorage"),ia=n(" \u548C "),ua={href:"https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API",target:"_blank",rel:"noopener noreferrer"},ka=n("IndexedDB"),da=n(" \uFF0C\u6216\u8005\u662F\u4E00\u4E9B\u517C\u5BB9\u591A\u79CD\u539F\u751F\u65B9\u6848\u5E76\u7EDF\u4E00\u7528\u6CD5\u7684\u7B2C\u4E09\u65B9\u65B9\u6848\uFF0C\u4F8B\u5982\uFF1A "),ma={href:"https://github.com/localForage/localForage",target:"_blank",rel:"noopener noreferrer"},ba=n("localForage"),ga=n(" \u3002"),ha=e(`<p>\u63D2\u4EF6\u4E5F\u662F\u72EC\u7ACB\u7684 npm \u5305\uFF0C\u9700\u8981\u5148\u5B89\u88C5\uFF0C\u518D\u6FC0\u6D3B\uFF0C\u7136\u540E\u624D\u80FD\u4F7F\u7528\u3002</p><p>\u6FC0\u6D3B\u65B9\u6CD5\u4F1A\u6D89\u53CA\u5230 Pinia \u7684\u521D\u59CB\u5316\u8FC7\u7A0B\u8C03\u6574\uFF0C\u8FD9\u91CC\u4E0D\u5C40\u9650\u4E8E\u67D0\u4E00\u4E2A\u63D2\u4EF6\uFF0C\u901A\u7528\u7684\u63D2\u4EF6\u7528\u6CD5\u5982\u4E0B\uFF08\u8BF7\u7559\u610F\u4EE3\u7801\u6CE8\u91CA\uFF09\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// src/main.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;@/App.vue&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span> <span class="token comment">// \u5BFC\u5165 Pinia</span>
<span class="token keyword">import</span> piniaPluginPersistedstate <span class="token keyword">from</span> <span class="token string">&#39;pinia-plugin-persistedstate&#39;</span> <span class="token comment">// \u5BFC\u5165 Pinia \u63D2\u4EF6</span>

<span class="token keyword">const</span> pinia <span class="token operator">=</span> <span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// \u521D\u59CB\u5316 Pinia</span>
pinia<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>piniaPluginPersistedstate<span class="token punctuation">)</span> <span class="token comment">// \u6FC0\u6D3B Pinia \u63D2\u4EF6</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pinia<span class="token punctuation">)</span> <span class="token comment">// \u542F\u7528 Pinia \uFF0C\u8FD9\u4E00\u6B21\u662F\u5305\u542B\u4E86\u63D2\u4EF6\u7684 Pinia \u5B9E\u4F8B</span>
  <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="highlight-lines"><br><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br><br><div class="highlight-line">\xA0</div><br></div><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="\u4F7F\u7528\u524D" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u524D" aria-hidden="true">#</a> \u4F7F\u7528\u524D</h4><p>Pinia \u9ED8\u8BA4\u5728\u9875\u9762\u5237\u65B0\u65F6\u4F1A\u4E22\u5931\u5F53\u524D\u53D8\u66F4\u7684\u6570\u636E\uFF0C\u6CA1\u6709\u5728\u672C\u5730\u505A\u6301\u4E45\u5316\u8BB0\u5F55\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u5176\u4ED6\u4EE3\u7801\u7701\u7565</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useMessageStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// \u5047\u8BBE\u521D\u59CB\u503C\u662F Hello World</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 2s \u540E\u53D8\u6210 Hello World!</span>
  store<span class="token punctuation">.</span>message <span class="token operator">=</span> store<span class="token punctuation">.</span>message <span class="token operator">+</span> <span class="token string">&#39;!&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>

<span class="token comment">// \u9875\u9762\u5237\u65B0\u540E\u53C8\u53D8\u56DE\u4E86 Hello World</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="\u4F7F\u7528\u540E" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u540E" aria-hidden="true">#</a> \u4F7F\u7528\u540E</h4><p>\u6309\u7167 persistedstate \u63D2\u4EF6\u7684\u6587\u6863\u8BF4\u660E\uFF0C\u6211\u4EEC\u5728\u5176\u4E2D\u4E00\u4E2A Store \u542F\u7528\u5B83\uFF0C\u53EA\u9700\u8981\u6DFB\u52A0\u4E00\u4E2A <code>persist: true</code> \u7684\u9009\u9879\u5373\u53EF\u5F00\u542F\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// src/stores/message.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./user&#39;</span>

<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useMessageStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    message<span class="token operator">:</span> <span class="token string">&#39;Hello World&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">greeting</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Welcome, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>userStore<span class="token punctuation">.</span>userName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// \u8FD9\u662F\u6309\u7167\u63D2\u4EF6\u7684\u6587\u6863\uFF0C\u5728\u5B9E\u4F8B\u4E0A\u542F\u7528\u4E86\u8BE5\u63D2\u4EF6\uFF0C\u8FD9\u4E2A\u9009\u9879\u662F\u63D2\u4EF6\u7279\u6709\u7684</span>
  persist<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>\u56DE\u5230\u6211\u4EEC\u7684\u9875\u9762\uFF0C\u73B0\u5728\u8FD9\u4E2A Store \u5177\u5907\u4E86\u6301\u4E45\u5316\u8BB0\u5FC6\u7684\u529F\u80FD\u4E86\uFF0C\u5B83\u4F1A\u4ECE localStorage \u8BFB\u53D6\u539F\u6765\u7684\u6570\u636E\u4F5C\u4E3A\u521D\u59CB\u503C\uFF0C\u6BCF\u4E00\u6B21\u53D8\u5316\u540E\u4E5F\u4F1A\u5C06\u5176\u5199\u5165 localStorage \u8FDB\u884C\u8BB0\u5FC6\u5B58\u50A8\u3002</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u5176\u4ED6\u4EE3\u7801\u7701\u7565</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useMessageStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// \u5047\u8BBE\u521D\u59CB\u503C\u662F Hello World</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 2s \u540E\u53D8\u6210 Hello World!</span>
  store<span class="token punctuation">.</span>message <span class="token operator">=</span> store<span class="token punctuation">.</span>message <span class="token operator">+</span> <span class="token string">&#39;!&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>

<span class="token comment">// \u9875\u9762\u5237\u65B0\u540E\u53D8\u6210\u4E86 Hello World!!</span>
<span class="token comment">// \u518D\u6B21\u5237\u65B0\u540E\u53D8\u6210\u4E86 Hello World!!!</span>
<span class="token comment">// \u518D\u6B21\u5237\u65B0\u540E\u53D8\u6210\u4E86 Hello World!!!!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u4F60\u53EF\u4EE5\u5728\u6D4F\u89C8\u5668\u67E5\u770B\u5230 localStorage \u7684\u5B58\u50A8\u53D8\u5316\uFF0C\u4EE5 Chrome \u6D4F\u89C8\u5668\u4E3A\u4F8B\uFF0C\u6309 F12 \uFF0C\u6253\u5F00 Application \u9762\u677F\uFF0C\u9009\u62E9 Local Storage \uFF0C\u53EF\u4EE5\u770B\u5230\u4EE5\u5F53\u524D Store ID \u4E3A Key \u7684\u5B58\u50A8\u6570\u636E\u3002</p><p>\u8FD9\u662F\u5176\u4E2D\u4E00\u4E2A\u63D2\u4EF6\u4F7F\u7528\u7684\u4F8B\u5B50\uFF0C\u66F4\u591A\u7684\u7528\u6CD5\u8BF7\u6839\u636E\u81EA\u5DF1\u9009\u62E9\u7684\u63D2\u4EF6\u7684 README \u8BF4\u660E\u64CD\u4F5C\u3002</p><h2 id="\u672C\u7AE0\u7ED3\u8BED" tabindex="-1"><a class="header-anchor" href="#\u672C\u7AE0\u7ED3\u8BED" aria-hidden="true">#</a> \u672C\u7AE0\u7ED3\u8BED</h2><p>\u770B\u5B8C Pinia \u8FD9\u4E00\u7AE0\uFF0C\u6211\u611F\u89C9\u5E94\u8BE5\u90FD\u56DE\u4E0D\u53BB Vuex \u4E86\uFF0C\u771F\u7684\u65B9\u4FBF\u4E86\u592A\u591A\uFF01\uFF01\uFF01\u65B0\u9879\u76EE\u5EFA\u8BAE\u76F4\u63A5\u7528 Pinia \uFF0C\u8001\u9879\u76EE\u5982\u679C\u6709\u8BA1\u5212\u8FC1\u79FB\uFF0C\u53EF\u4EE5\u548C Vuex \u540C\u65F6\u4F7F\u7528\u4E00\u6BB5\u65F6\u95F4\uFF0C\u7136\u540E\u518D\u9010\u6B65\u66FF\u6362\u3002</p>`,15);function fa(_a,ya){const o=c("RouterLink"),t=c("ExternalLinkIcon"),r=c("GoogleAdsense"),l=c("ClientOnly"),i=c("GitalkComment");return k(),d(m,null,[g,s("p",null,[h,a(o,{to:"/communication.html#vuex-new"},{default:p(()=>[f]),_:1}),_]),s("p",null,[y,s("a",v,[w,a(t)]),x,s("a",S,[E,a(t)]),A]),B,P,s("p",null,[I,s("a",M,[q,a(t)]),T]),V,s("p",null,[C,s("a",N,[R,a(t)])]),W,s("div",F,[$,s("p",null,[D,a(o,{to:"/update.html#create-preset"},{default:p(()=>[H]),_:1}),j,z,G,s("a",J,[U,a(t)]),L])]),O,s("p",null,[K,Q,X,Y,Z,s("a",nn,[sn,a(t)]),an,en,tn]),pn,s("p",null,[on,cn,ln,s("a",rn,[un,a(t)]),kn]),dn,s("p",null,[mn,s("a",bn,[gn,a(t)]),hn,fn,_n,yn,vn]),wn,s("div",xn,[Sn,s("p",null,[En,An,Bn,a(o,{to:"/component.html#%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89"},{default:p(()=>[Pn]),_:1}),In])]),Mn,s("ol",null,[qn,s("li",null,[s("p",null,[Tn,a(o,{to:"/component.html#setter-%E7%9A%84%E4%BD%BF%E7%94%A8"},{default:p(()=>[Vn]),_:1}),Cn])])]),Nn,s("p",null,[Rn,a(o,{to:"/component.html#%E5%93%8D%E5%BA%94%E5%BC%8F-api-%E4%B9%8B-toref-%E4%B8%8E-torefs-new"},{default:p(()=>[Wn]),_:1}),Fn]),$n,s("p",null,[Dn,Hn,jn,a(o,{to:"/component.html#%E5%93%8D%E5%BA%94%E5%BC%8F-api-%E4%B9%8B-ref-new"},{default:p(()=>[zn]),_:1}),Gn]),Jn,s("p",null,[Un,Ln,On,a(o,{to:"/component.html#%E5%93%8D%E5%BA%94%E5%BC%8F-api-%E4%B9%8B-toref-%E4%B8%8E-torefs-new"},{default:p(()=>[Kn]),_:1}),Qn]),Xn,s("p",null,[Yn,a(o,{to:"/component.html#%E4%BD%BF%E7%94%A8-torefs"},{default:p(()=>[Zn]),_:1}),ns]),ss,s("p",null,[as,a(o,{to:"/component.html#%E4%BD%BF%E7%94%A8-toref"},{default:p(()=>[es]),_:1}),ts]),ps,s("div",os,[cs,ls,s("p",null,[rs,s("a",is,[us,a(t)]),ks])]),ds,s("p",null,[ms,bs,a(o,{to:"/component.html#watch"},{default:p(()=>[gs]),_:1}),hs,a(o,{to:"/component.html#%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-new"},{default:p(()=>[fs]),_:1}),_s]),ys,s("p",null,[vs,a(o,{to:"/component.html#%E5%8F%96%E6%B6%88%E7%9B%91%E5%90%AC"},{default:p(()=>[ws]),_:1}),xs]),Ss,s("div",Es,[As,s("p",null,[Bs,a(o,{to:"/component.html#%E6%95%B0%E6%8D%AE%E7%9A%84%E8%AE%A1%E7%AE%97-new"},{default:p(()=>[Ps]),_:1}),Is])]),Ms,s("p",null,[qs,a(o,{to:"/component.html#%E5%9B%9E%E9%A1%BE-vue-2-3"},{default:p(()=>[Ts]),_:1}),Vs,Cs,Ns]),Rs,s("div",Ws,[Fs,s("p",null,[$s,Ds,Hs,s("a",js,[zs,a(t)]),Gs])]),Js,s("p",null,[Us,s("a",Ls,[Os,a(t)]),Ks]),Qs,s("p",null,[Xs,s("a",Ys,[Zs,a(t)])]),na,s("p",null,[sa,s("a",aa,[ea,a(t)]),ta]),s("div",pa,[oa,s("p",null,[ca,s("a",la,[ra,a(t)]),ia,s("a",ua,[ka,a(t)]),da,s("a",ma,[ba,a(t)]),ga])]),ha,a(l,null,{default:p(()=>[a(r)]),_:1}),a(l,null,{default:p(()=>[a(i,{issueId:152})]),_:1})],64)}var wa=u(b,[["render",fa],["__file","pinia.html.vue"]]);export{wa as default};
